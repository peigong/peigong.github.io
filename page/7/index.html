<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>VET. 周培公</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="VET. 周培公的个人网站">
<meta property="og:type" content="website">
<meta property="og:title" content="VET. 周培公">
<meta property="og:url" content="http://pg.js.cn/page/7/index.html">
<meta property="og:site_name" content="VET. 周培公">
<meta property="og:description" content="VET. 周培公的个人网站">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="VET. 周培公">
<meta name="twitter:card" content="summary">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">VET. 周培公</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">写 JS 代码的周培公是一个兽医</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/proposals">写作计划</a>
        
          <a class="main-nav-link" href="/guide">导游笔记</a>
        
          <a class="main-nav-link" href="/books">藏书目录</a>
        
      </nav>
      <nav id="sub-nav">
        
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://github.com/peigong"><span class="fa fa-github"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://gitee.com/pg0xff"><span class="fa fa-git"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://user.qzone.qq.com/377650913"><span class="fa fa-qq"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://weibo.com/u/1766654653"><span class="fa fa-weibo"></span></a>
          
            <a class="nav-icon" href="https://pg.js.cn"><span class="fa fa-home"></span></a>
          
        
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-catalog-bookcase-shu-xue" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-shu-xue.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-shu-xue.html">数学和工程控制论</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《工程控制论（3版）.上册》，钱学森，宋健著，北京：科学出版社，2011（中国科学技术经典文库），ISBN 978-7-03-030094-2，书名原文：Engineering Cybernetics</li>
<li>《工程控制论（3版）.下册》，钱学森，宋健著，北京：科学出版社，2011（中国科学技术经典文库），ISBN 978-7-03-030099-7，书名原文：Engineering Cybernetics</li>
<li>《工程数学.线性代数（6版）》，同济大学数学系编，北京：高等教育出版社，2014.6，ISBN 978-7-04-039661-4</li>
<li>《线性代数附册学习辅导与习题全解：同济第 6 版》，同济大学数学系编，北京：高等教育出版社，2014.7，ISBN 978-7-04-039689-8</li>
<li>《高等数学（7版）.上册》，同济大学数学系编，北京：高等教育出版社，2014.7（2018.12 重印），ISBN 978-7-04-039663-8</li>
<li>《高等数学（7版）.下册》，同济大学数学系编，北京：高等教育出版社，2014.7（2018.12 重印），ISBN 978-7-04-039662-1</li>
<li>《高等数学（第七版.上册）同步辅导及习题全解》，苏志平，郭志梅主编，北京：中国水利水电出版社，2014.10（2018.11 重印）（高校经典教材同步辅导丛书），ISBN 978-7-5170-2622-8</li>
<li>《高等数学（第七版.下册）同步辅导及习题全解》，苏志平，郭志梅主编，北京：中国水利水电出版社，2014.10（2018.11 重印）（高校经典教材同步辅导丛书），ISBN 978-7-5170-2623-5</li>
<li>《计算机科学中的数学：信息与智能时代的必修课》，（美）埃里克.雷曼（Eric Lehman）,（美）F.汤姆森.莱顿（F.Thomson Leighton），（美）艾伯特.R.迈耶（Albert R. Meyer）著，唐李洋等译，北京：电子工业出版社，2019.4，ISBN 978-7-121-35533-2，书名原文：Mathematics for Computer Science</li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-catalog-bookcase-wu-jun" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-wu-jun.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-wu-jun.html">吴军专题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《浪潮之巅：第2版.上册》，吴军著，北京：人民邮电出版社，2013.7（2014.8 重印），ISBN 978-7-115-30120-8</li>
<li>《浪潮之巅：第2版.下册》，吴军著，北京：人民邮电出版社，2013.7（2014.8 重印），ISBN 978-7-115-30166-6</li>
<li>《浪潮之巅：第4版.全2册》，吴军著，北京：人民邮电出版社，2019.7（2021.6 重印），ISBN 978-7-115-51422-6</li>
<li>《数学之美》，吴军著，北京：人民邮电出版社，2012.6（2012.6 重印），ISBN 978-7-115-28282-8</li>
<li>《数学之美（3版）》，吴军著，北京：人民邮电出版社，2020.5，ISBN 978-7-115-53797-3</li>
<li>《文明之光.第1册》，吴军著，北京：人民邮电出版社，2014.7（2014.8 重印），ISBN 978-7-115-35854-7</li>
<li>《文明之光.第2册》，吴军著，北京：人民邮电出版社，2014.7（2014.8 重印），ISBN 978-7-115-35853-0</li>
<li>《文明之光.第3册》，吴军著，北京：人民邮电出版社，2015.1，ISBN 978-7-115-37709-8</li>
<li>《大学之路：陪女儿在美国选大学.上册》，吴军著，北京：人民邮电出版社，2015.8，ISBN 978-7-115-40196-0</li>
<li>《大学之路：陪女儿在美国选大学.下册》，吴军著，北京：人民邮电出版社，2015.8，ISBN 978-7-115-40197-7</li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-catalog-bookcase-xiao-shuo" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-xiao-shuo.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-xiao-shuo.html">文学艺术：小说</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《戏曲源流 - 曲律易知》，许之衡著，北京：中国戏剧出版社，2015.12（中国戏曲艺术大系.史论卷），ISBN 978-7-104-04330-0</li>
<li>《西游记（全2册）》，（明）吴承恩著，西安：三秦出版社，2017.3，ISBN 978-7-5518-1358-7</li>
<li>《西游记辨》，竺洪波著，上海：上海三联书店，2021.4，ISBN 978-7-5426-7136-3</li>
<li>《脂砚斋评石头记（全四册）》，（清）曹雪芹著，（清）脂砚斋评，北京：线装书局，2012.11，ISBN 978-7-5120-0706-2</li>
<li>《三国演义》，（明）罗贯中撰，北京：学苑出版社，1998.9（中国古典名著普及丛书），ISBN 7-5077-1510-8</li>
<li>《围城（2版）》，钱钟书著，北京：人民文学出版社，ISBN 978-7-02-002475-9</li>
<li>《我们仨》，杨绛著，北京：生活-读书-新知三联书店，2003.7，ISBN 978-7-108-01880-9</li>
<li>《鲁滨孙历险记》，[英]丹尼尔.笛福著，黄杲炘译，上海译文出版社出版、发行，1997年1月第1版，1997年5月第2次印刷，ISBN 7-5327-1919-7&#x2F;I.1150</li>
<li>《马克.吐温中短篇小说集》，（美）马克.吐温著，汪树东，龙红莲译，武汉：长江文艺出版社，2011.6（2014.4 重印），ISBN 978-7-5354-5030-2</li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-catalog-bookcase-za-shu" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-za-shu.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-za-shu.html">在架杂书</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《中国历史研究法，中国历史研究法补编》，梁启超著，北京：中华书局，2014.4（国民阅读经典），ISBN 978-7-101-09973-7</li>
<li>《西行漫记》，（美）埃德加.斯诺著，董乐山译，解放军文艺出版社，ISBN 7-5033-1547-4&#x2F;I.1241</li>
<li>《社会契约论》，（法）卢梭著，杨风帆译，天津：天津人民出版社，2016.5（2018.4 重印），ISBN 978-7-201-10474-4</li>
<li>《论政治经济学的若干未定问题》，（英）约翰-穆勒著，（汉译世界学术名著丛书），ISBN 978-7-100-11821-7</li>
<li>《睡在悬崖上的人》，易思婷著，北京：同心出版社，2013.2，ISBN 978-7-5477-0681-7</li>
<li>《New International Version Old Testament》</li>
<li>《当地向导实务》，龙睿，徐璐，宋臻主编，上海：上海交通大学出版社，2021.11，ISBN 978-7-313-25623-2</li>
<li>《经济解释 Economic Explanation，二0一九增订版，五卷本》，张五常（Steven N.S. Cheung）著，中信出版集团，ISBN 978-7-5086-9825-0</li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-catalog-bookcase-zhang-zhao-zhong" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-zhang-zhao-zhong.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-zhang-zhao-zhong.html">张召忠专题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《走向深蓝（上、下册）》，张召忠著，广州：广东经济出版社，2011.8（2018.3 重印）（话说中国海洋），ISBN 978-7-5454-0906-2</li>
<li>《百年航母（上、下册）》，张召忠著，广州：广东经济出版社，2012.2（2018.12 重印）（话说中国海洋军事系列丛书），ISBN 978-7-5454-0853-9</li>
<li>《规范海洋（上、下册）》，张召忠著，广州：广东经济出版社，2013.10（话说中国海洋军事系列. 张召忠主编），ISBN 978-7-5454-1981-8</li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-catalog-bookcase-zhen-cang" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-zhen-cang.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-zhen-cang.html">珍藏图书</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《金刚经》 折本</li>
<li>《西行漫记》 埃得加-斯诺著</li>
<li>《内经》 北京：科学技术文献出版社，1996.2，ISBN 7-5023-2524-7</li>
<li>《注解伤寒论》 汉，张仲景著，人民卫生出版社，1963年4月第1版，1996年1月第1版第9次印刷，ISBN 7-117-02127-6&#x2F;R.2128</li>
<li>《温病条辨》 清，吴瑭（鞠通）著，人民卫生出版社，1963年10月第1版第1次印刷，1972年12月第1版第3次印刷，统一书号：14048.2886</li>
<li>《金匮要略广注》 清，李彣著，杜晓玲校注，中国中医药出版社，1992年12月第1版，1996年3月第2次印刷，ISBN 7-80089-032-5&#x2F;R.033</li>
<li>《易经》 抄本</li>
<li>《三十六计》 抄本</li>
<li>《周易参同契》 抄本</li>
<li>《江青同志讲话》</li>
</ul>
<h1 id="架"><a href="#架" class="headerlink" title="架"></a>架</h1><ul>
<li>《三国演义》，[明]罗贯中撰，北京：学苑出版社，1998.9，ISBN 7-5077-1510-8</li>
</ul>
<h1 id="遗"><a href="#遗" class="headerlink" title="遗"></a>遗</h1>
      
    </div>
  </div>
  
</article>



  
    <article id="post-catalog-bookcase-zhong-yi" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/catalog-bookcase-zhong-yi.html" class="article-date">
  <time class="dt-published" datetime="2020-08-15T16:00:00.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/catalog/">藏书目录</a>►<a class="article-category-link" href="/categories/catalog/bookcase/">在架图书</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/catalog-bookcase-zhong-yi.html">中医专题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>《内经讲义，2版》，贺娟等主编，北京：人民卫生出版社，2012.6，ISBN 978-7-117-15744-5</li>
<li>《中药学（供中医、中药、针灸专业用）》，凌一揆主编，颜正华副主编，上海科学技术出版社，1984年6月第1版，ISBN 7-5323-0497-3&#x2F;R.136（课）</li>
<li>《方剂学（供中医药类专业用）》，段富津主编，上海科学技术出版社，1995年6月第1版，ISBN 7-5323-3708-1&#x2F;R.1033（课）</li>
<li>《黄帝内经素问校释.第2版.上册》，山东中医学院等校释，北京：人民卫生出版社，2009.1，ISBN 978-7-117-11078-5</li>
<li>《黄帝内经素问校释.第2版.下册》，山东中医学院等校释，北京：人民卫生出版社，2009.1，ISBN 978-7-117-11120-1</li>
<li>《灵枢经校释.第2版》，河北医学院校释，北京：人民卫生出版社，2009.1，ISBN 978-7-117-10840-9</li>
<li>《人体经络穴位使用图册》，徐平主编，北京：化学工业出版社，2011.5，ISBN 978-7-122-10212-6</li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-essay-thinking-2018-11-15-faster" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/essay-thinking-2018-11-15-faster.html" class="article-date">
  <time class="dt-published" datetime="2018-11-14T16:00:00.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/essay/">札记随笔</a>►<a class="article-category-link" href="/categories/essay/thinking/">思考札记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/essay-thinking-2018-11-15-faster.html">天下武功 唯快不破</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>这个演讲的标题是《天下枪法 唯快不破》，副标题是《江湖人称二炮十三秒的快枪手分享对快的思考》。如果是在小范围内分享，使用这样的标题，对宅男腐女来说还可以，既可以讨论问题，也可以调剂气氛。如果演讲的现场突然来了好多人，使用这样的标题就不太合适了，毕竟我们中也有纯真的，看到污段子就感觉身体不适，比如我。如果范围再扩大，有各个团队的人，甚至还有一些领导参加，我们的演讲就要正式很多，不能胡云八侃。这些情况往往是到了现场才会知道的，这个时候演讲的标题已经打在了幕布上，临时更换就不太合适。即便要临时更换的话，也要重新思考新的标题、新的副标题，还要打字换上，既需要时间，也显着不优雅。</p>
<p>如何在神不知鬼不觉间，以魔术级别的时间换掉标题？这就引入了我们的主题，“快”。</p>
<p>如何做到这么快呢？其实我提前准备几个标题就可以了。范围稍大，我们演讲的主标题可以是《天下剑法 唯快不破》，副标题可以是《什么叫做快？ 如何做到快？》。如果范围再扩大，这种以剑客自居，给事物下定义的做法就显得太狂妄了。在大佬云集的场合做汇报分享，说话要严谨。我这个特定的个人，在一段特定的时间里，通过观察一些特定的人、一些特定的事，对开发速度这件事作了一些思考，现在给大家分享一些思考的片断。主标题也不能乱篡改，还是要恢复到大家都知道的《天下武功 唯快不破》。</p>
<p>其实第一组标题的副标题使用了三个典故，一个污的、一个不污的、一个中性的。至于你看到的是哪个，这是一个知者见知、淫者见淫的事情。我简单讲解中性的这个典故，其他的两个大家可以根据兴趣深入研究一下，限于时间不再一一讲解。二炮，就是解放军第二炮兵部队。当然前段时间军队改革，改成了火箭军。在液体燃料、井式发射的时代，灌装液体燃料从准备到完成要几个小时，甚至以天计，发射井建设要以年计。但是军委下了二炮打击决心，导弹发射从准备到打出去，是要以秒计的。军队的口号是召之能来、来之能战、战之能胜。军委下了打击决心，你说要花几年挖发射井，花几天灌装燃料，那哪行呢。这个项目delay，估计我们都被人团灭好几轮了。</p>
<p>在正式开始之前，我们不能不纪念一下金庸（1924年3月10日—2018年10月30日）先生。我们在这里提到的很多概念，都是读他的小说知道的。</p>
<p>其实这个主题主要讨论的是两个问题，什么叫做快？怎样做得快？归根到底，讨论的是一个POWER问题。什么是POWER，知识，力量，科学，真理，权柄、话语权？知则有权，比如知府、知县、知心姐姐，都是有权柄的。在现实中，不可能、也没有必要做到无限快。我们做到比对手盘的预期快就可以了。比如，比老板的预期快、比产品经理的预期快，比项目经理的预期快，比合作伙伴的预期快。</p>
<p>什么是快？</p>
<ul>
<li>快是响应的时间短</li>
<li>快是效率高</li>
<li>快是成本低</li>
<li>快是要素结构没有瓶颈</li>
<li>快是生产力发生革命性质变</li>
<li>快的预期需要管理</li>
</ul>
<h2 id="缩短响应时间"><a href="#缩短响应时间" class="headerlink" title="缩短响应时间"></a>缩短响应时间</h2><h3 id="一副神奇的画"><a href="#一副神奇的画" class="headerlink" title="一副神奇的画"></a>一副神奇的画</h3><p>当年360和腾讯在3Q大战的时候，腾讯公司迅速封掉80端口的接口，掐死360的网页应用。为了满足大量用户使用网页聊天的需求，腾讯迅速推出了QQ的网页版本。我简单看过这个网页版本的产品，作为一个前端工程师，马上就能判断出，这是一个不可思议的工作量。腾讯公司是怎么在一两天的时间内快速推出这个产品的？</p>
<p>以前经常思考7×24的快速反应团队，他们是怎么做到的？就像一副神奇的画，一个小牧童，牵着一头牛，拿着一把伞，晴天的时候伞是夹着的，下雨的时候伞是撑开的。太神奇了！</p>
<p>2011年5月1日，22名海豹突击队乘坐直升机奇袭本拉登位于巴基斯坦境内的住所。三个月以后，2011年8月6日晚，塔利班民兵用一发RPG火箭弹命中了CH-47直升机，其上乘坐的22名海豹突击队员全部遇难。塔利班发布新闻，宣称他们干掉了袭击本拉登的海豹突击队22人队。美国人紧接着发布新闻，说明遇难的22人是袭击本拉登的22人队，但是不是那22人。这组新闻看得我云山雾罩，啥意思啊？我仔细捋了一下才知道，海豹突击队一支22队是分三组22人的。在同一时间，有一组在执行任务，有一组在战备训练，有一组在休假。从此以后，我对7×24的快速反应就有了深刻的理解。</p>
<p>听刘宝瑞先生说单口相声，那副神奇的画卖20万，买家一番砍价，砍到了10万。拿回家后，趁下雨的时候大宴宾客，想嘚瑟一下神奇画作。但是，伞却没有撑开。然后找卖家理论，卖家说这画是卖20万的，你非得砍到10万，那只好卖给你这一张了。</p>
<p>QQ的网页版本魔术是怎么实现的，我不知道。以理度之，我猜是这样，为了应对市场的需求，腾讯的产品开发团队开发出了一个网页版本的QQ。硬生生的掐断线上已有方案，代价大、阻力大、成本大，所以迟迟不能上线。当此之时,爆发了3Q大战，决策团队审时度势、快速决策，直接把锅甩给了360。</p>
<p>科学没有神奇，神奇都是领域内行表演给外行的魔术。</p>
<h3 id="三家快剑流派"><a href="#三家快剑流派" class="headerlink" title="三家快剑流派"></a>三家快剑流派</h3><p>丁坚的一字电剑剑光唬人，是快剑。田伯光刀光闪烁，逼的令狐冲只能招架不能还手，是快刀。这些都不讲，因为太LOW，使起来夺人真气，缺少一种行云流水的美。昆山刀客7秒钟砍5刀，3处骨折，全是开放性创伤。刀法虽然凌厉，也不过是市井斗狠的小角色，不值得效仿。</p>
<p>今天咱们层层递进的讲三种剑法。</p>
<p>第一种，出手都是咄咄逼人的进手剑，特点是环环相扣，一气呵成。想不出金庸武侠里哪家剑法是这个路子，先不起名字了，姑且就叫无名剑吧。以后想起来再说。</p>
<p>第二种是华山派的独孤九剑，不再是连环出剑，只是在对手出招时出手反制。后发先至，也是咄咄逼人。</p>
<p>第三种是全真派的定阳针。一起手，剑气就笼罩自己以防身，笼罩对手随时取其狗命。这剑法温文尔雅，眉目间洋溢着慈悲喜舍，浑身上下散发着真理的光辉。</p>
<h3 id="无名剑"><a href="#无名剑" class="headerlink" title="无名剑"></a>无名剑</h3><p>魔教几位PM抬着一口大锅，猛得向武当派FE张五侠砸过来，把素素妹子担心的够呛。翠山在大锅飞至头顶时，一挥手长袖飘飘，五根手指借力使力，扶住大锅一旋，这锅就改变方向往魔教PM们砸去。魔教PM们吓得赶紧四散躲开，那锅咣当就砸在地上摔得粉碎，地面都砸出了尺把深的一个坑。他长袖飞舞，手掌隐在袖中，旁人看来，竟似以衣袖卷起大锅，掷向天空一般。整个天鹰教顿时鸦雀无声，片刻后彩声四起。素素嘴角上扬，得意的笑着扑进了白眉鹰王的怀里。</p>
<p>PM们手脚没有什么轻重，别管看见什么，都会随手扔过来，不能使蛮力硬接。这次他们扔个大锅，你硬接了。下次他们念动咒语，使个遣山之法，把三座大山调过来压你，你何以应对？你就是齐天大圣，也会被压的三尸神诈七窍喷红。</p>
<p>张翠山借力使力的甩锅手段虽然高明，但并不能解决问题，不能有所斩获。甩锅是另一个话题，不是我们今天要讨论的。借力打力能解决问题，但不是剑法，今天也不讨论。</p>
<p>当一个大问题、一个大需求，像一头大活牛被扔过来的时候，产品经理也觉得这个东西像热狗一样，个头并不小。别一方面，主要是觉得是个活的有机整体，并不能分解。</p>
<p>面对一头大牛，我们不可能像王思聪吃热狗一样一口吃掉。要像前辈丁厨师那样，提剑在手，仔细观察大牛的结构，认真思考大牛各部分间的关系，大胆动手切割。根据切割的实践，再调整观察、思考和用剑方法。</p>
<p>这里边有一个知行合一的问题。认识问题各部分之间的结构、动手的先后顺序，以及结构之间、先后之间的关系，这是其知。手起剑落，不胆怯不迟疑，动作麻利，是其行。知行合一就是，用观察思考的认识指导落地行动，以行动的反馈加深、升华认识。队列、优先级加权队列、泳道队列等等，都是问题结构分解、次序解析的好手段。</p>
<p>我们在一件事情上，浸淫日久，对问题的结构和解析次序，一般是有认识的，通常失于迟疑。</p>
<p>当时曹操在官渡，北有袁绍在冀州，东有刘备在徐州，这是问题的结构。先灭刘备，再灭袁绍，这是解决的次序。这一认识，当时熟知时势的人，都能认识到。曹操之所以是用兵如神的军事家，就在于官渡军中虚立丞相旗号，亲自带兵以偏将名义闪击徐州。在袁绍迟疑之间，徐州城破。当事态明朗，袁绍知道怎么回事儿的时候，曹操已经回兵防官渡了。</p>
<p>换我们处理这个问题时，会发生什么呢？对问题的结构和解决的次序没有什么不同，区别是对动作有迟疑。闪击徐州动作不麻利，刘备就有所准备，问题发生变化。钝兵徐州城下，进不能拔，退为所乘。迟疑之间，袁绍主力破官渡，过黄河，历史就为之改写了。</p>
<p>把问题按结构拆开，各个击破，依次解决。在这里，快不但是目的，也是过程和手段。</p>
<h3 id="华山派的独孤九剑模式"><a href="#华山派的独孤九剑模式" class="headerlink" title="华山派的独孤九剑模式"></a>华山派的独孤九剑模式</h3><p>我们还是以打仗来举例。先入战地者为主，后入战地者为客，这个大家都是很清楚的。显然你先到达战场，先有所准备，就会更有把握打胜仗。怎么样使用兵力可以快速的抵达战场？答案就是伏兵最快。</p>
<p>老板有一个创意，产品经理提出一个需求，我们开发团队拿出一个事先埋伏好的系统，这个响应时间是不是最快？</p>
<p>我们工程师刚开始写代码的时候，应变能力不足。几次碰壁后就会学乖，会在代码中打埋伏，提前处理需求可能会出现的变化。马上出现的问题也很明显，就是写了大量未来永远也不会用到的代码，而未来实际发生的变化，又在意料之外。这样就会使开发时间旷日持久，代码臃肿。设计过度，事与愿违。</p>
<p>解决的办法，有很多种，其中一种就是独孤九剑模式。了解业务，了解需求，更准确地研判未来的变化。</p>
<p>令狐冲剑法通神，风清扬传授的秘诀之一，就是不管对手准备使用什么招数，一定会有征兆。认真研究这些征兆，准确地判断对手将要使出的招数，就可以提前埋伏，出剑克制。</p>
<p>了解这些征兆并不难，眼观六路，耳听八方，认真观察，认真思考。业务、产品、研发各团队通力配合，及时沟通，就不会有突然出现的大需求，就可以提前打埋伏。</p>
<p>我们很多人比较认真，其实就是杠子头，硬问如果就是没有征兆怎么办？没有征兆，突然出现的东西，里里外外透着一股子妖邪之气，大家可以脑补一下这种现象。西天取经的时候，孙悟空火眼金睛，总能识别妖怪。他看到了什么？唐老官肉眼凡胎，他看不到的是什么东西？其实猴子看到的，就是没有征兆。啥都没有，所以唐老师就什么也没有看到。我们的工程师们，是在各种需求的三昧真火里锻炼过的。只要认真观察，认真思考，你就会看到事情发生之前的征兆。没有征兆的需求，有时间就玩一下，没有时间就一棒子打死。</p>
<p>认真研究征兆，提前有所准备，就可以表现的非常快。</p>
<h3 id="全真派的定阳针模式"><a href="#全真派的定阳针模式" class="headerlink" title="全真派的定阳针模式"></a>全真派的定阳针模式</h3><p>在2008年以前，听到过一个做绿植的人抱怨奥运会的绿植招标。 奥运会的绿植招标，需求、方案、预算都是保密的，不能告诉你，但是让你去投标。需求都不知道，我怎么投标啊？当时那个人就是对这种招标方式非常不满，甚至以阴谋论看待，认为这里面有猫腻。后来我认真思考过这一问题，得出了自己的看法，这里分享一下。如果你是一个一流的绿植公司，在这个领域有不可动摇的话语权，那么你就比奥运会的招标委员会更加懂得可能会有什么样的需求、可能会有什么样的技术手段、可能会有什么样的方案、可能会有什么样的预算？</p>
<p>保密单位保密的原因可能是出于保密的考虑，我们的产品经理保密的原因八成是因为没有想清楚。这个也不能全怪产品经理。事情是渐进明晰的，系统没有做完，没有上线，他就不知道想要一个什么东西。也有可能是因为，事情的本身就一直在变。这些是客观的存在，只能在一定程度上解决，并不能彻底的解决。所有的应对策略，都必须应对这种不确定性。</p>
<p>应对这种不确定性，方案有很多种，其中之一就是定阳针模式。</p>
<p>一个领域问题的光谱，都会有两个端点。在这两点中间，数学意义上有无限个点。在这两种极端场景下，很多表现都是不相同的，甚至截然相反。如果见招拆招，头痛治头，脚痛治脚，就会疲于应付永不休止。在这个时候，我们需要找到适用于这两种场景的规律性认识，并找到解决相应问题的方案，用科学的方法给予证明。这些科学的方法，包括并不限于DEMO验证和沙盘推演的思维实验。这里需要强调的是，并不是所有的认识和所有的解决方案，都要在实际项目中落地实施，大部分是给予科学证明后放入工具就可以了。</p>
<p>DEMO验证这一方法，有必要简单展开一下，包括概念验证，生产验证，规模化验证，规模化系统验证。</p>
<p>如果工具箱的工具质量足够高，我们就可以说你这一招定阳针使的精、气、神俱足。两个端点中间的任何一点，都在你的剑气笼罩之下。在实践中，任何一个点冒出问题，你就可以在一瞬间拿出工具解决掉，一剑封喉。这样的状态，才叫做气定神闲，仙风道骨。唯一的毛病就是平时需要做大量的储备，需要厚积薄发。毕竟台上十分钟，台下十年功，没有什么捷径可走。</p>
<p>日常写代码的时候，如果一个功能第一次出现，命令式也好，面向过程也好，都是可以接受的，你并不需要写出来应对未来所有变化的代码。但是，要用你犀利的眼神，注视你面前的这个问题。这个家伙未来的变化，有没有在你的剑气笼罩之下。如果没有，你前进后退左右一步能不能cover他。如果不能，走位几次可以？除了脑补这些低速的、偏于静态的招式变化，还要思考这个家伙变起仓促的可能性。事变之前会有什么征兆，事变之后会有哪些方向，以哪个招数的哪个变式克制？对的，出招就是独孤九剑。五湖四海皆兄弟，天下武林是一家，定阳针和独孤九剑是可以同时使的。</p>
<p>我们以jQuery时代的写法举个例子，让某个ID的元素实现某种效果。第一步就是先实现，毕竟能上线的代码才是好代码。作为一个优雅的前端工程师，你可能想写成一个组件。如果伸头是一刀，缩头也是一刀，不增加什么工作量，写个组件也好。如果要用不少时间，就且住，毕竟鬼才知道这个效果将来还要不要了。当然，不进行组件化并不妨碍你在写代码的时候，在不增加工作量的前提下，把代码写的优雅，易于组件化。写成组件，一般来说第一个参数是元素ID，将来就可以换ID为不同元素实现同一效果。进一步的话，就是配置组件的效果。且住且住，大胸逮不要自己加戏了。顶多加个配置对象作第二个参数，后面的所有写法纯脑补就够了。一定要克制你设计过度的冲动，冲动是魔鬼。</p>
<pre><code>function demo(id, options)&#123;&#125;
</code></pre>
<h3 id="那些为快所付出的代价"><a href="#那些为快所付出的代价" class="headerlink" title="那些为快所付出的代价"></a>那些为快所付出的代价</h3><p>可能大家想得到一种神奇的东西，掐个诀念个咒语，或者断然割掉身体的某一部分，速度就无比的飞快起来。现在讲了这么一大段，似乎是一定要更强，才可以更快。是的，没错！一定要更强。我们通篇的主题是POWER，如果你不能更强，就是被割的韭菜、被宰的羔羊。这就是宿命。</p>
<p>响应快，有成本，有代价。在某个点上响应太快，就会整体效率低下，整体代价高昂。这是后文要讨论的问题。但是，作为Leader、产品经理、项目经理，必须很清醒的认识到这一点。在工作中最常见的问题之一，就是假定响应快的成本等于零。</p>
<p>总而言之一句话，就是要想缩短一点响应时间，就要数量级的增加需要付出的艰辛努力，就要数量级的付出成本。这里只是讨论了努力的方向，和付出成本的方式。</p>
<p>当然，我能理解大家的诉求，提高了效率、降低了成本的快，才是真的快。</p>
<h2 id="提高开发的效率"><a href="#提高开发的效率" class="headerlink" title="提高开发的效率"></a>提高开发的效率</h2><p>同样的产出，使用不同的时间，就是不同的效率。效率要不断提高，这个是没有争议的，是有共识的。但是，对时间度量、对效率的观察，有不同的视角，比如项目经理视角、团队视角和架构视角。观察视角不同，就会产生不同的观察结果，不同的观察结论。</p>
<h3 id="项目的效率"><a href="#项目的效率" class="headerlink" title="项目的效率"></a>项目的效率</h3><p>项目是对不确定性的管控。管控的效率就是项目的效率。</p>
<h3 id="团队的效率"><a href="#团队的效率" class="headerlink" title="团队的效率"></a>团队的效率</h3><p>团队是人的招募、培养、组织和选拔，工具装备的选用。用人的效率，使用工具的效率，就是团队的效率。</p>
<h3 id="架构的效率"><a href="#架构的效率" class="headerlink" title="架构的效率"></a>架构的效率</h3><p>架构是不同质要素的结构。各要素的协同效率就是架构的效率。</p>
<h3 id="整体的效率"><a href="#整体的效率" class="headerlink" title="整体的效率"></a>整体的效率</h3><p>有视角的效率都是片面的效率。整体效率是从上帝视角观察到的效率。</p>
<p>战区管战讲得是管项目效率，军种管建讲得是团队效率，军委管总讲得就是架构效率和整体效率。</p>
<p>有一个管总的机构，对提高效率是否有效率，以及必要性的程度，都是一个极具有争议的话题。毕竟副主席被斩下两三个，四总部主管被斩下两个，这些都是反面的证据。</p>
<p>提高效率，不一定会降低成本。有的效率提高是以线性的、算术级数的、几何级数，甚至指数级别的提高成本为代价的。</p>
<p>对公司这样的盈利机构来说，降低成本的效率提高，才是有意义的快。哪怕效率没有提高，速度没有加快，只是降低了成本，都是有意义的。</p>
<h2 id="降低开发的成本"><a href="#降低开发的成本" class="headerlink" title="降低开发的成本"></a>降低开发的成本</h2><p>我干一天活，公司给我一百块钱，这是会计成本。当然如果一百块钱也不给我，我就不干了。</p>
<p>这里要讨论的成本并不是工资成本，作为一个严谨的经济学家，要讨论的肯定是经济学意义的成本。这里引入经济学，并不是为了吹牛X，而是因为经济学研究的是如何以最低的成本实现最高的效率。</p>
<p>主要讨论五种经济学成本，分别是机会成本、比较成本、边际成本、准入成本、沉没成本。</p>
<p>机会成本是最大的代价，也就是说你为了做这一件事情，而不能做的另外一件最有价值的事情，就是做这一件事情的机会成本。所以最有经济学效率的做法，就是一直做最有价值的事情。当然，什么是有价值，还需要再讨论。</p>
<p>你如果做次重要的事情，那么最重要的那一件就是你的机会成本。只有一直做最重要的事情，机会成本才会降下来。以掐尖策略处理事务，可以快速缓解各方痛点的压力，非常出快的感觉，这是无名剑的路子。如果步步为营，一个一个的死磕问题，非常容易钝兵坚城之下，进不能拔，退为所乘。</p>
<p>曾国藩结硬寨打呆仗的路子，并不是死磕，要诀是结硬寨，是建立基础设施壁垒。</p>
<p>比较成本是机会成本的另一个说法。一强一弱合作共事的时候，非常有意义，比如带人。</p>
<p>大家平时所接触的开发成本，一般是边际成本，就是每新增一个功能所需的成本，通常以PD计算。所以，平时需要降低的也是边际成本。提高效率可以降低边际成本，这里不展开讨论。除此这外，边际成本要想压低，一般就要增加基础设施的投入，形成边际成本壁垒。这一壁垒的投入成本，就是准入成本。</p>
<p>当我们投入了巨大的准入成本，或者获得了边际成本壁垒，或者什么都没有获得，屁都冇得。不管怎么说，这投入覆水难收，是沉没成本，没有经济学价值。这投入是造价，是会计核算需要考虑的问题，是老板心中的痛，咱不管他。</p>
<p>降低边际成本的手段，一般是设计新的架构、可复用的组件、选用新技术等等。我们以架构成本作展开讨论。评价架构的标准主要是对降低边际成本的贡献。架构的成本基本上可以分为几类，开发成本、看守成本、介入成本和推广的成本。</p>
<p>新架构最好的成本结构是，明显的、大幅的降低边际成本，看守成本小于旧架构看守成本，介入成本等于零。由此可能会大幅增加开发成本和推广成本，关键是如果不能上线，覆水难收，就会归零。</p>
<h2 id="破解要素结构上的瓶颈"><a href="#破解要素结构上的瓶颈" class="headerlink" title="破解要素结构上的瓶颈"></a>破解要素结构上的瓶颈</h2><p>制约速度的生产力要素是环环相扣的。解决好瓶颈问题，才可以解放生产力。</p>
<p>要素是有结构的，提高效率的方法也是有结构的。在浅水区的时候，一个要素的进步就可以大幅度的提高效率，降低成本。但是，进入深水区，要素结构的研究就是唯一的路了。</p>
<p>要素结构中的瓶颈问题，就是运动的摩擦力。在有动力加速度的情况下，没有摩擦力的世界是不可想象的。我们的速度只可以更高、更快，无限逼近无限快，而不可能，没没有必要达到无限快。</p>
<p>比如要素可以划分为团队、项目、架构和整体管理，比如要素可以划分为工程师、工具装备、制度和流程，等等等等。之所以不提具体的东西，而是说要素结构，是因为不同的要素结构需要不同的理论来定义的。能指导实践的理论，就是好理论，科学的实践需要科学理论的指导。</p>
<p>这里说的理论，是用于识别要素结构、识别短板瓶颈、提出系列问题，并指导补齐短板，解决瓶颈问题的。我们要不断研究，找到这样的理论，统筹协调要素结构，压茬改进。</p>
<p>重点突破，让其他要素全部成为短板当然是坠吼的了。工业革命中蒸汽机出现，就是最好的示例。这种是生产力的革命，后文讨论。</p>
<p>某一要素出现革命性创新，如果事前没有进行规模化系统的验证，系统结构上的其他要素就会形成普遍性的瓶颈，革命性的要素就会出现开工不足，千里马拉车、拉磨骈，骈死于槽枥之间的事情就会大量出现。用老百姓的话说，这叫窝工。</p>
<p>当然，如果假定革命的成本是零，要素效率的革命性提高是天上掉下来的馅饼，那这一切都不成为问题。然而实际上，要素革命往往是系统养的大白象。系统常态中，不但根本就没有产出，而且只会源源不断的产生沉没成本。</p>
<p>提高效率、降低成本、统筹要素结构，都可以促进生产力水平的提高，但只是量的变化。生产工具的革命、生产关系的革命，才可以带来生产力质上的革命。</p>
<h2 id="迎接生产力的革命"><a href="#迎接生产力的革命" class="headerlink" title="迎接生产力的革命"></a>迎接生产力的革命</h2><p>革命并不是饥饿和暴力，而是具备压倒性优势的先进生产力取代落后的行为。</p>
<p>在生产力水平基本不变的条件下，改进生产工具，改进生产关系，就可以取得巨大成功。举两个例子。</p>
<p>初汉三杰的韩信，连百万之众，攻必克，战必取，向无败绩，山东六国一个人灭掉四个，这是很厉害的。读史书分析，秦汉之间生产力并没有革命性的变化，以当时的通讯工具、交通运输工具和作战装备来说，能组织运转起几十万上百万的人来，那项目管理和团队管理的能力确实是真的很厉害。这是改进生产关系取得成功的例证。</p>
<p>在项羽之前，马匹是当动力用的，主要是用于运输，运输粮食、运输兵员。所谓兵车，也是马拉的车，步兵拿长矛长戈站在车上对捅。项羽是改革了对马匹的使用，以马匹代步，发明骑兵战法。我们所熟知的使用长杆兵器的骑兵形象，是明朝发明马蹬以后才有的战法。项羽的骑兵战法很LOW，就是人骑在马上，左手抓住马鬃固定身体，右手拎着砍刀挥舞。就是这么LOW的骑兵，项羽组织了三万人，就把刘邦的五十六万大军，从今天的江苏徐州一直追杀到河南的荥阳，老婆孩子都陷落了。直到遇到山地，步兵据险而守，骑兵不易展开，才止住败势。直到韩信的汉军在北方平定了魏国、赵国、燕国和齐国，政治上又争取了彭越和英布，才扭转了荥阳的败局。这是改进生产工具取得成功的例证。</p>
<p>可以想像一下，生产力发生革命，生产工具发生革命、生产关系发生革命，是一幅什么景象。</p>
<p>中国的骑兵战法始于项羽，终于1949年的咸阳阻击战。大家设想一下，三条防线依次发力。首先是第三防线，各种火炮集中开火。依然冲上来的骑兵，其次由第二防线各种轻重机枪、卡宾枪集中开火。还能再冲上来的骑兵，就在第一防线展开白刃搏斗。对方骑兵使用的马刀短、重、钝，解放军这边使用的是在太原战役中缴获的日本军刀。日本军刀从材质到工艺，都有工业化背景，长、轻、锋利。</p>
<p>世界范围内终结骑兵的是马克沁重机枪。有上面的讲解，这里不再展开讲解了。</p>
<p>这就是生产力的革命。</p>
<p>我们绝大多数人没有能力发起生产力的革命，甚至没有机会遇到大革命。小范围内生产力的革命，发生的概率更大一些。如果遇到了，不要迟疑，去拥抱变化。</p>
<h2 id="管理快的预期"><a href="#管理快的预期" class="headerlink" title="管理快的预期"></a>管理快的预期</h2><p>掌握了对快定义的话语权，就可以无限快。有人问科学家波普，您是怎么做到一直站在科学的浪潮之巅的？波普笑了笑说，你们没有发现这浪潮是我涌起的吗？《黑冰》。你跑得再快，也不如给快重新下一个定义。可能你会说，哎呀，你不讲规则。是的，这个世界的规则，是由POWER定义的。</p>

      
    </div>
  </div>
  
</article>



  
    <article id="post-essay-arts-2018-08-25-yang-cong-mei-zi" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/essay-arts-2018-08-25-yang-cong-mei-zi.html" class="article-date">
  <time class="dt-published" datetime="2018-08-24T16:00:00.000Z" itemprop="datePublished">2018-08-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/essay/">札记随笔</a>►<a class="article-category-link" href="/categories/essay/arts/">文艺随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/essay-arts-2018-08-25-yang-cong-mei-zi.html">洋葱妹子</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>昨天写完代码下班儿的时候挺晚的，收拾收拾背包，装好电脑，打算去吃个晚饭。楼下食堂平时都结束的很早，估计早就没饭了。但我还想去看看，如果没有饭，就在外面吃个小面，或者回家煮个粉条吃。</p>
<p>坐电梯到B2出来，在食堂门口看了一眼，肯定没饭啦，灯已然全都熄了。转身准备走，食堂的灯突然全部亮了起来。好奇怪，我探头看了一眼，有个妹子从食堂工作间端着一个餐盘儿走出来，穿着暗紫色的工装，衣角和袖口都有些卷，过膝的裙子也是杂乱的紫色，不乍好看。我问他，食堂还有饭吗？他说有的，你要吃什么？我说随便吃一点吧，只要是素菜没有肉就行。</p>
<p>食堂妹把自己的餐盘儿放在桌子上，又从工作间端出来一个餐盘儿放在我面前。看着整饬的还不错，一个冻豆腐，一个面筋，分别炒了一些青菜，一个紫菜蛋花汤，一碗米饭一角饼。我有心逗个闷子，就说妹子你们这儿现在都是剩饭，我是不是就不用刷卡了？食堂妹白了一眼，似笑不笑的说，想占便宜就直说，吃吧吃吧。</p>
<p>我就坐在食堂妹对面，低头吃了几口。一抬头，猛然间发现，他正似笑不笑的盯着我看。我很诧异的问他，乍了？他说，你怎么不吃肉啊？哦，我说我是虔诚的佛弟子，持戒修行。他问，你姓什么吖？我说我姓周，你叫我培公就好了，我喜欢的妹子们都是叫我培公的。妹子你怎么称呼啊？</p>
<p>我姓杨，食堂妹说，既然信佛，有一首锁链锁虚空的偈子，你知道吗？我说是不是这个，有人要锁周培公，犹如锁链锁虚空，虚空若能锁得住，再来锁我周培公。</p>
<p>食堂妹问我，你不吃肉，那你吃洋葱吗？我说，如果嫩得话，我都可以生吃。食堂妹似笑不笑得看着我，嘴角略微往上一撇，洋葱你都吃，合着五荤三厌全不戒啊。那你戒女色吗？我心中一愣，怎么聊这个话题。这时，我略略的注视了一下食堂妹，衣着打扮虽然不甚时兴，但似笑不笑的也有三分姿色。我半开着玩笑，猥琐的说，如果是妹子你这样的，我是不戒的。</p>
<p>哈哈哈，我们同时笑了起来，吃饭的气氛似乎也不再那么沉闷，很快我就把餐盘儿里的饭吃了个差不多。食堂妹突然似笑不笑的说，看你吃得挺香啊，我去给你拿一个水果。一转身，他就进了工作间，似乎是拿了个苹果出来，暗紫红色的，皱皱巴巴，感觉肮兮兮的。别人白送一个水果，我也不好意思拒绝，也不好多说什么。半开玩笑着说，你那儿话也没有洗，让我怎么吃啊？食堂妹似笑不笑说，那就去你家洗洗呗！我呵呵的笑着，顺手把苹果塞进了背包侧兜里。</p>
<p>回到家洗了洗，就直接光着身子上床睡了，最近写代码确实有点累。睡到半夜，我隐隐约约的听着卫生间好像有淋浴喷头的哗哗水声。饧饧着眼睛，我暗想，昨天晚上洗完澡没有关水吗？实在是想不起来，就从床上坐起来，准备去卫生间把水关了。</p>
<p>刚坐起身，卧室门突然被人推开了，居然是食堂妹走了进来。我赶紧拿毛毯挡在身前，吃惊的问，你怎么来了？食堂妹用我的擦脸毛巾搓着湿头发，似笑不笑的说，不是你把我带回来的么，莫非你不想让我睡这儿吗？</p>
<p>呃。。。我有点儿迟疑，你可以睡隔壁房间。但我心里想，这不扯么，哪跟跟啊这是，他乍进来的。</p>
<p>呵，让我睡隔壁啊，呵呵，他似笑不笑的走到我床前说，那你帮我把衣服脱了吧，锁链儿在背后，我够不着。好，我答应着从床沿儿上站起来，举起双手准备去给他拉开锁链儿。这时，刚才挡在身前的毛毯滑到了地上，下意识的我哈腰去捞，不成想脸却伏在了他的胸口上，立马又尴尬的站直了身子。</p>
<p>他似笑不笑的站在我面前，略仰着头说，在自己家里你还挡什么啊，呵呵。我心里想，你让我给你拉后背的锁链儿，怎么也不转过身来呀？但我还是尴尬的环抱着他，从上到下拉开了锁链儿。手里拿着这件暗紫色的连衣裙，我却不知道应该放在哪儿，因为长期就我一个人，也没有衣架什么的。</p>
<p>你就扔在地上吧，他似乎明白了我的难处，这件衣服不要了。我把连衣裙随手扔在地上，气氛似乎缓和了很多，不再那么尴尬。我端详了一下他，身上还穿着一件淡紫色略透明的连衣裙。这衣服前面也没有锁链儿，就问他，妹子你这件衣服的锁链儿是不是也在后面啊？他点了点头。</p>
<p>我环抱着他，又给他从后面拉开了锁链儿。妹子伏在我耳边说，你都把人家衣服脱了，还叫妹子啊，叫我聪聪吧，我叫聪聪。我笑道，好，这衣服也扔地上吧，反正我家里也没有衣架，明天我带你再去买一件。</p>
<p>这时候我不再那么紧张，也不是那么尴尬了。他身上还穿着一件白色的透明连衣裙，还蛮好看的。他冲我笑了笑，我会意的把他揽在怀里，去拉开后背的锁链儿。鼻子拱到了他的头发，有一股淡淡的洋葱味。我心里笑道，晚上居然吃的是凉拌洋葱。</p>
<p>脱完这件衣服，我看他还真是有七分姿色，但是怎么还有一件连衣裙啊。我就坐在床边，把聪聪揽在怀里，轻轻的抚摸着他的后背，给他拉开背后的锁链儿，能感觉到肌肤的凉爽、柔滑、细腻。脱完这件衣服，居然还有一件。我一手揽着他，一手抚摸着调笑说，聪聪你穿多少件儿衣服来的啊，今天晚上咱还能不能睡觉了？</p>
<p>他突然簌簌的流下泪来，我赶紧抱住哄他道，乍滴了，乍哭了？他伏在我怀里抽泣着说，我突然不知道我是谁，也不知道过一阵子还有没有我？一下子，我感觉这个妹子好陌生，似乎并不认识他，也不知道他因何烦恼，也不知道应该怎么哄他。</p>
<p>我略有所思，喃喃的愕然说，生老病死，求不得，怨憎会，爱别离，都是五蕴炽盛的苦。以金作器，器器皆金。虽有分段生死，虽有变易生死，但其实是不断不常的。色不异空，空不异色，色即是空，空即是色。</p>
<p>妹子止住哭声，伏在我怀里说，我懂了，谢谢你小哥哥。我爱抚着他说，天儿也不早了，我给你脱了这件衣服，我们早点睡吧。聪聪脸色酡红，娇羞的说，最后一件衣服人家要自己脱，你转过身去，不许偷看。</p>
<p>我转过身去，躺在床上，背朝着聪聪。也不知道过了有多久，突然听到手机铃声响。我拿过手机看了一眼，我去，啥时候我把闹铃改在八点半了，平时闹铃都是定在七点的。赶紧一骨碌爬起来，我发现不知道什么时候毛毯被我踢到了地上。地面上居然有好多洋葱皮和散乱的纸巾，整个房间都有一股洋葱味。时间太晚了，顾不上多想，我就把洋葱皮和纸巾打扫起来，抓紧时间简单洗漱了一下，就来上班了。</p>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-lessons-2018-08-10-asynchronous-programming-for-javascript" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2018-08-10-asynchronous-programming-for-javascript.html" class="article-date">
  <time class="dt-published" datetime="2018-08-09T16:00:00.000Z" itemprop="datePublished">2018-08-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-lessons-2018-08-10-asynchronous-programming-for-javascript.html">前端异步编程的来龙去脉</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="这个异步的世界"><a href="#这个异步的世界" class="headerlink" title="这个异步的世界"></a>这个异步的世界</h2><p>很多其他语言的工程师，总是讥讽<code>javascript</code>中的异步编程。也有很多<code>javascript</code>工程师，缺乏道路自信，自甘堕落，在编程中以消灭异步模式为能事，异步的做法、异步的写法。</p>
<p>我们的异步编程，真的就矮人一等吗？回答不但是NO，我们还要指着这些人说：图样图森破。</p>
<p>平时，我们不是撸码，就是打游戏。有点钱的宅男宅女们，或许会炒股买比特币甘当韭菜，得了一种医学上被称为投资者幻觉的精神疾病。同学们，这是低级趣味，我们除眼前的苟且，还有诗和远方。让我们睁开眼睛看一看真实的世界吧。</p>
<p>比如，我是说比如，我老婆不在北京。在这里，大家可以自我代入一下，有老婆的想老婆，有老公的想老公。没有结婚的，或者隐婚一族，想一想你各位男朋友、女朋友。单身狗们嘛，YY一下好了，想一想白雪公主，或者那个骑白马的唐僧。</p>
<p>某一天夜里，电话铃突然响了。老婆说明天要来北京，核查一下我自己在北京有没有胡搞乱搞。</p>
<p>接到电话，正常的我们，大体上会有两种反应。JAVA工程师放下电话，会直奔车站，在出站口苶(nie)呆呆发愣，等着明天下午接站。我们<code>javascript</code>工程师当然不会这么二，我们会明天下午提前到出站口，老婆一出来就抱住他痛哭，倾诉衷肠。诉说我们如何昨天晚上一接到电话，就马上来车站等着他，觉也没有睡，饭也没有吃，水都没有喝一口，手机也没有带，朋友圈都没有刷。</p>
<p>当然，要说正常，那是作为一个工程师表现成这样是正常的。真实的我不会这样。注意，这里没有复数，是我，不是我们，因为我并不能代表在座诸位。</p>
<p>接完电话，我会面无表情的把电话装进裤兜里，继续灌满电热水壶烧水，水开了以后水壶会咔哒一声响。烧上水后，从冰箱里拿出一碗剩饭，放进微波炉热一下，热好了以后微波炉会嘀嘀响。完了以后把半个多月没有洗的衣服塞进洗衣机，自动洗好甩干放水，然后嘀嘀响。洗衣服的这工夫得擦擦地，擦完地吃饭，吃完饭喝一杯水睡觉。第二天闹钟响，起床，该干嘛干嘛，该上班上班。老婆车进北京，过了收费站会给我打电话，我就去车站。在附近随便逛逛，毕竟平时都见不到北京的太阳。出了检票口，我老婆会再给我打一个电话，我就慢吞吞的踱到出站口去接他。</p>
<p>当然，你可以说。第一种，同步的做法，表现出了一种痴情，一种童话般的爱情世界。第二种，异步的做法，粘呼呼的都是油腻，一股子庸俗的人间烟火气。但是，不管怎么说，作为一个中年油腻男，我把图样图森破这句话扔给你，你没有意见吧。</p>
<h2 id="言归正传"><a href="#言归正传" class="headerlink" title="言归正传"></a>言归正传</h2><p>我们已经认识到了，这个世界本来就是异步的。这个认识很重要。</p>
<p>我们在撸码的时候，最上乘的方法论，就是遵照这个世界自己本来的样子编程。所谓道法自然，如其本来。</p>
<p>那么好，我们言归正传，正式讨论编程中异步的处理。</p>
<p>在讨论异步编程的方案时，我们在这里只讨论方案的轮廓和概况，不讨论具体的设计细节和实现细节。因为这些细节 每一个都需要用一篇长文，或者几篇长文来处理，在我们这里装不下。</p>
<p>在JS中，如何进行异步编程？一些前端新秀，甚至一些后端老油条，都知道了<code>ES6</code>标准中有一个海藏神珍，叫<code>Promise</code>。</p>
<p>对这样的人，我们要大声对他们说，同志哥，你out了。在日新月异的前端世界里，我们现在处理异步问题，已经使用<code>ES7</code>的<code>async-await</code>方案了。</p>
<p>这个方案长成这个样子：</p>
<pre><code>async function get()&#123;
    let result = await fetch();
    console.log(result);
    return result;
&#125;
</code></pre>
<p>这个方案似乎看上去消灭了异步，起码消灭了异步的写法。</p>
<p>但是这个写法，让很多略有经验的前端工程师疑窦丛生。疑问有二：</p>
<ul>
<li>这个变量赋值是异步的，还是同步的？</li>
<li>在这个讨论的上下文中，大家很容易可以猜到是异步的。问题是，在这个同步的写法下，掩盖了什么细节，有什么坑没有？</li>
</ul>
<p>经书有云，涉水道路漫水桥，虽有老司机，不敢径过。</p>
<p>先提出一个问题，留下伏笔。在这个方法的赋值过程中，<code>javascript</code>引擎可以不可以同时并发做其他事情？</p>
<p>我们用<code>Promise</code>方案重写一遍，如下：</p>
<pre><code>function get()&#123;
    return fetch().then((result) =&gt; &#123;
        console.log(result);
        return result;
    &#125;);
&#125;
</code></pre>
<p>用更老的<code>callback</code>方案重写一遍，如下：</p>
<pre><code>function get(done)&#123;
    fetch(function(err, result)&#123;
        console.log(result);
        done(null, result);
    &#125;);
&#125;
</code></pre>
<p>关于<code>Promise</code>方案和<code>callback</code>方案的进一步讨论，后文再行展开。</p>
<p><code>async-await</code>方案的本质实现是<code>Promise</code>方案，只不过是<code>javascript</code>引擎替你做了这件事。</p>
<p>需要说明一下的是，<code>async-await</code>方案只是<code>ES6</code>中<code>Generator-yield</code>方案的语法糖而已，本质上是一毛一样的。鉴于<code>async</code>只是取代了星号，<code>await</code>只是取代了<code>yield</code>，而且<code>async-await</code>方案可读性更好，这里就不再展开讨论<code>Generator-yield</code>方案。</p>
<p>我主张，前端新司机不急于先使用<code>async-await</code>方案，可以大量使用<code>Promise</code>方案。因为<code>async-await</code>在同步的形式下，掩盖了很多异步的内容，一不留神就会踩到坑、崴到脚。</p>
<p>异步是这个世界的本质，需要用心的去理解和体会。而名实相副，形式和内容保持某种一致的方案，显然更适合当新司机的教练车。</p>
<p>当然，有些峨冠博带奇装异服的老司机，注意，这里不是说生理年龄老，而是说心理年龄老，拢一拢没有几根的油腻头发，睁开满是眼屎的眼睛，睡眼惺忪的争辩道：“我们是年青人，要和最新的语言标准保持一致，要使用最前沿的技术方案”。</p>
<p>没错，<code>async-await</code>这种猥琐的解决方案，就是给你们这些猥琐的老司机提供的，大量使用就好了。总踩着油门也挺累的，定速巡航很不错，蛮好用。毕竟，你们这些老司机，即便开车睡着了，遇到异常时，也能在睡梦中一脚刹车踩死。</p>
<p>最后再看一组代码：</p>
<pre><code>async function get()&#123;
    try&#123;
        let result1 = await fetch1();
        let result2 = await fetch2();
        let result3 = await fetch3();
        let result4 = await fetch4();
        let result5 = await fetch5();
        console.log(result1, result2, result3, result4, result5);
    &#125;catch(ex)&#123;
    &#125;
&#125;
</code></pre>
<p>这组代码疑问有二：</p>
<ul>
<li>发生了异常怎么办？同步过程中、异步过程中的异常和回调中的异常地位相同吗？我想区分处理这三种异常怎么办？</li>
<li>这几个方法是顺序依次执行的，没问题。问题是，很多时候，我们并不关心执行的顺序，反正都执行完了告诉我，我做我想做的事情就好。</li>
</ul>
<p>如上代码处理异常是可以的，主要毛病还是同步的形式掩盖的异步的内容，新司机容易踩坑。比如，我不管发生了什么异常，总是执行某些代码，怎么办？当然可以用<code>finally</code>处理，问题是这个代码执行的时间点在什么时候？</p>
<p>使用<code>Promise.all</code>处理并发问题当然是可以的，但是<code>Promise</code>对象作为<code>javascript</code>王国中的当朝一品大员，难道就只是负责站在门口计数，等常委们到齐了喊主席来开会吗？这样的工作虽然挺重要，但一介哨兵足矣。</p>
<h2 id="王国一品"><a href="#王国一品" class="headerlink" title="王国一品"></a>王国一品</h2><p><code>javascript</code>王国的一品大员有很多，这里的主角是<code>Promise</code>对象。所以，什么是<code>Promise</code>对象呢？</p>
<p>先看一下Promise对象的方法：</p>
<ul>
<li>Promise.prototype.catch()</li>
<li>Promise.prototype.finally()</li>
<li>Promise.prototype.then()</li>
<li>Promise.all()</li>
<li>Promise.race()</li>
<li>Promise.reject()</li>
<li>Promise.resolve()</li>
</ul>
<p>其中，实例方法有3个，静态方法有4个。</p>
<p>对<code>Promise</code>对象给一个定义很简单，网上多的是。我们主要从哪个特征是<code>Promise</code>对象的本质特征来看待这个问题，从这个角度来讨论。</p>
<p>什么是本质特征呢？就是说，一个对象具有某种特征，他就是<code>Promise</code>对象。当把这种特征抽离后，他就不称为<code>Promise</code>对象。我们认为，这种特征就是<code>Promise</code>对象的本质特征。</p>
<p><code>Promise</code>对象又被称为<code>thenable</code>对象，就是遵循规范实现了<code>then</code>方法，是<code>thenable</code>接口的一个实例。也就是说，遵循规范实现了<code>then</code>方法，是<code>Promise</code>对象的本质特征。</p>
<p>在讨论<code>Promise</code>对象的本质特征时，我们有必要回顾一下十八层回调地狱。对于前端老帮菜来说，当然是一种缅怀和凭吊。对前端新司机来说，那就像在太湖上的小姑娘黄蓉一样，感慨一下国破家亡的故国情怀也不错。</p>
<pre><code>step1(function (value1) &#123;
    step2(value1, function(value2) &#123;
        step3(value2, function(value3) &#123;
            step4(value3, function(value4) &#123;
                step5(value4, function(value5) &#123;
                    step6(value5, function(value6) &#123;
                        step7(value6, function(value7) &#123;
                            step8(value7, function(value8) &#123;
                                step9(value8, function(value9) &#123;
                                    step10(value9, function (value10) &#123;
                                        step11(value10, function(value11) &#123;
                                            step12(value11, function(value12) &#123;
                                                step13(value12, function(value13) &#123;
                                                    step14(value13, function(value14) &#123;
                                                        step15(value14, function(value15) &#123;
                                                            step16(value15, function(value16) &#123;
                                                                step17(value16, function(value17) &#123;
                                                                    step18(value17, function(value18) &#123;
                                                                        // 地狱不空，誓不成佛
                                                                        console.log(value18);
                                                                    &#125;);
                                                                &#125;);
                                                            &#125;);
                                                        &#125;);
                                                    &#125;);
                                                &#125;);
                                            &#125;);
                                        &#125;);
                                    &#125;);
                                &#125;);
                            &#125;);
                        &#125;);
                    &#125;);
                &#125;);
            &#125;);
        &#125;);
    &#125;);
&#125;);
</code></pre>
<p>在历史上，有一位大菩萨，为了超度十八层回调地狱中的前端冤鬼，他说：我与你们立一个约。</p>
<p>处理异步问题时，大家无论什么时候都要遵守一个承诺。当正常执行异步任务后，把返回值传递给then方法的回调函数，任务失败后也要以类似的方式给予明确的回应。而且，一个异步任务要么是一个等待回应的状态，要么是成功，要么就是明确拒绝，此外不能有任何第三条道路可走。</p>
<p>在地狱中，有一只叫尾生的冤鬼说：南无大菩萨，弟子没听明白，求解释。</p>
<p>菩萨说，譬如娑婆世界无限有情众生，今天爱这个，明天爱那个，没有个定性。今天爱，明天不爱，反反覆覆。三角四角有很多，脚踩两只船的也不少。</p>
<p>我在这里定下一个《南海行为准则》。其略曰：别人向你求爱，你可以犹豫也可以考虑考虑。但是如果同意，要给人明确的答复。如果不同意，也要明确的拒绝。不要在那里态度不明半推半就，出了事情报异常。还有就是，同意了就同意，别回头又拒绝。拒绝了就不要再吃回头草，别来回反覆让人心神不宁。约会的时候，别人在等你，你要去就去，不想赴约的话，也给人一个明信。别你又不想去，让人在桥底下干等着。</p>
<p>尾生闻法欢喜，信受奉行。</p>
<p>在这里，有必要对<code>Promise</code>对象实例方法和静态方法作一个简要的说明。</p>
<p>实例方法，示例如下：</p>
<pre><code>function get()&#123;
    try&#123;
        return fetch().then((result) =&gt; &#123;
            console.log(result);
            return result;
        &#125;).catch((err) =&gt; &#123;
            console.error(err);
        &#125;).finally(() =&gt; &#123;
            // 同志，这是我的党费
        &#125;);
    &#125;catch(ex)&#123;
        // 乍会走到这儿了呢？这不科学啊！
    &#125;
&#125;
</code></pre>
<p>静态方法，简要介绍：</p>
<ul>
<li><code>Promise.resolve</code>：遇到心仪的人表白，立马要答应，不想再考虑，但是又不能违了南海菩萨定下的行为准则。</li>
<li><code>Promise.reject</code>：逻辑同上，只是立马要拒绝。</li>
<li><code>Promise.all</code>：约几个朋友去K歌，不管先来后到，到齐了K起。到不了的也要电话确认下。</li>
<li><code>Promise.race</code>：小朋友想出去玩，请示爸妈，有一个人同意就可以出去，有一个人拒绝就玩不成。SO，这个规则告诉我们，想出去玩的话，要先请示最可能同意的那个，想不出去玩的话，要先请求最可能拒绝的那个。当然爸妈里有一个嘴快的，这个策略就破功了。</li>
</ul>
<h2 id="没落的贵族"><a href="#没落的贵族" class="headerlink" title="没落的贵族"></a>没落的贵族</h2><p>在异步编程中，回调函数无论如何都是要提及的。其一是因为他功勋卓著的历史地位，其二是因为在编程实务中依然扮演着的重要角色。<code>Promise</code>对象的<code>then</code>方法接受的参数本身就是一个回调函数。</p>
<p>回调函数在平时编程中用的很多，简单列举如下。</p>
<p><code>Promise</code>对象的<code>then</code>方法中的回调：</p>
<pre><code>fetch().then((data) =&gt; &#123;
    console.log(data);
&#125;).catch((err) =&gt; &#123;
    console.error(err);
&#125;).finally(() =&gt; &#123;
    console.log(&#39;说完最后一句话&#39;);
&#125;);
</code></pre>
<p><code>Document</code>事件回调：</p>
<pre><code>document.querySelector(&#39;body&#39;).addEventListener(&#39;click&#39;, function(e)&#123;
    console.log(e);
&#125;);
</code></pre>
<p><code>jQuery ajax</code>请求的回调</p>
<pre><code>$.post(&#39;&#39;, function(res)&#123;
    console.log(res);
&#125;);
</code></pre>
<p><code>Node.js</code>中的回调</p>
<pre><code>fs.readFile(&#39;/etc/passwd&#39;, (err, data) =&gt; &#123;
    if (err) throw err;
    console.log(data);
&#125;);
</code></pre>
<p>回调函数在<code>javascript</code>王国中的重要地位，是由函数在<code>javascript</code>王国中一等公民的地位决定的。</p>
<p>函数作为<code>javascript</code>语言中的灵魂，是可以脱离肉身而独立存在的。不像在一些弱鸡语言中，方法只能依附于对象存在，不是实例方法，就是静态方法。</p>
<p>我这么说，穿长衫的孔先生就会踱过来争辩，呃。。这个。。。我们强类型语言是世界上最好的语言，怎么能说是弱鸡语言呢？他还会继续说什么不变的形式具有西方逻辑美，等等，一些半懂不懂的话。</p>
<p>这个时候，我就会问他，是七十二般变化的孙悟空法术高强，还是你这种形式不变的肉眼凡胎法术高强？既然不变的形式在你西方逻辑中那么地位崇高，你西方哲学的起始为什么却是主张世界具有唯一本原的泰勒斯。然后，孔先生嘴里就会继续嘟囔着什么，回到工位埋头写BUG了。</p>
<p>具有七十二般变化的函数，是函数式编程的话题，在这个回调函数的主题里不展开讨论。</p>
<p>说到回调函数，有两个事情非常值得一提。</p>
<ul>
<li><code>Node.js</code>给出了回调函数约定，<code>function(err, data)&#123;&#125;</code>。这个约定给异常以出口，是非常好的最佳实践。</li>
<li>流程控制库<code>Q</code>、<code>async</code>，在属于他们的那个时代，一直都是最火的<code>NPM</code>包，可以很好的处理回调函数的依次执行、并发执行，等等流程控制的问题。现在回过头来看，没有<code>ES</code>标准中的方案那么简洁流畅，主要是还抱有彻底同步化的邪路思想，所谓炖鱼要炖出牛肉味来，比如异步的循环什么的。不过现在他都实现成了<code>Promise</code>。</li>
</ul>
<p>我们以倒叙的形式，讨论了前端异步编程的来龙去脉。在这里，具体的语法、具体的用法不是那么重要。最重要的是通过讨论，要确立一种信念，一种道路自信。这个世界本来就是异步的，异步编程是人间正道，既不是因循守旧的老路，也不是改旗易帜的邪路。</p>
<h2 id="旁门源流"><a href="#旁门源流" class="headerlink" title="旁门源流"></a>旁门源流</h2><p>异步编程，从回调函数和流程管理的方案，发展到<code>Promise</code>对象和<code>Generator-yield</code>方案，再到<code>ES7</code>的<code>async-await</code>方案，基本上是<code>javascript</code>中处理异步问题的正统源流。</p>
<p>除了这一支主流，还有一些旁门。菩提祖师曾对孙悟空说，三百六十旁门，皆可成正果。所以，有必要对异步处理的旁门做个简单介绍。</p>
<p>在这些旁门中，值得介绍的设计模式是观察者模式和中介者模式。常见伎俩如下：</p>
<ul>
<li>钩子回调，早期第三方库常用。常见的生命周期的概念，也可以称为钩子，只不过稍微复杂。</li>
<li>事件回调，使用诸如<code>addEventListener</code>、<code>on</code>等方法注册回调函数，由<code>dispatchEvent</code>、<code>emit</code>等方法触发事件，向回调函数分发事件数据。</li>
<li>发布订阅模式、观察者模式、中介者模式。</li>
</ul>
<p>前端处理异步编程的这一支源流第三方库有很多，比如<code>RxJS</code>。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2015/05/async.html">阮一峰：async 函数的含义和用法</a></li>
<li><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html">阮一峰：Javascript异步编程的4种方法</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000011526612">ES6系列文章 异步神器async-await</a></li>
<li><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/6.0/index.html">ECMAScript® 2015 Language Specification</a></li>
<li><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/7.0/index.html">ECMAScript® 2016 Language Specification</a></li>
<li><a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/8.0/index.html">ECMAScript® 2017 Language Specification (ECMA-262, 8th edition, June 2017)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/tc39/ecma262">Status, process, and documents for ECMA262</a></li>
<li><a target="_blank" rel="noopener" href="https://www.promisejs.org/">Promises</a></li>
<li><a target="_blank" rel="noopener" href="http://wiki.commonjs.org/wiki/Promises/A">Promises&#x2F;A</a></li>
<li><a target="_blank" rel="noopener" href="https://promisesaplus.com/">Promises&#x2F;A+</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Generator">Generator - JavaScript - MDN</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise - JavaScript - MDN</a></li>
<li><a target="_blank" rel="noopener" href="https://cn.rx.js.org/">RxJS 中文文档</a></li>
<li><a target="_blank" rel="noopener" href="http://documentup.com/kriskowal/q/">kriskowal&#x2F;q</a></li>
<li><a target="_blank" rel="noopener" href="http://caolan.github.io/async/">caolan&#x2F;async</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/8/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">
      <img src="/images/weixin.png" alt="weixin" width="100%" />
    </h3>
    <div class="widget">
      <ul class="self-media-list">
        
          <li>
            <a target="_blank" rel="noopener" href="https://weread.qq.com/">微信读书</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/cgi-bin/home">微信公众号</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://channels.weixin.qq.com/platform">视频号助手</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">札记随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/arts/">文艺随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/travel/">老周游记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/read/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/thinking/">思考札记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/">典籍学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/classic/hou-han-shu/">后汉书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/qing-shi/">清史稿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/sutra/">佛经</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/analects/">论语</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/su-wen/">黄帝内经素问</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/">培公诗抄</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2015/">2015 ~ 2024</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2010/">2010 ~ 2014</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2004/">2004 ~ 2009</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/b-2004/">~ 2004 年</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/buddha/">禅宗心得</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/characters/">人物</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/">藏书目录</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/bookcase/">在架图书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/table/">封存图书</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">IT</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/env/">开发环境</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/manual/">常用文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/studio/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/lessons/">培训教程</a></li></ul></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 VET. 周培公<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/proposals" class="mobile-nav-link">写作计划</a>
  
    <a href="/guide" class="mobile-nav-link">导游笔记</a>
  
    <a href="/books" class="mobile-nav-link">藏书目录</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>