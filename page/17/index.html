<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>VET. 周培公</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="VET. 周培公的个人网站">
<meta property="og:type" content="website">
<meta property="og:title" content="VET. 周培公">
<meta property="og:url" content="http://pg.js.cn/page/17/index.html">
<meta property="og:site_name" content="VET. 周培公">
<meta property="og:description" content="VET. 周培公的个人网站">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="VET. 周培公">
<meta name="twitter:card" content="summary">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">VET. 周培公</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">写 JS 代码的周培公是一个兽医</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/proposals">写作计划</a>
        
          <a class="main-nav-link" href="/books">藏书目录</a>
        
      </nav>
      <nav id="sub-nav">
        
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://github.com/peigong"><span class="fa fa-github"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://gitee.com/pg0xff"><span class="fa fa-git"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://user.qzone.qq.com/377650913"><span class="fa fa-qq"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://weibo.com/u/1766654653"><span class="fa fa-weibo"></span></a>
          
            <a class="nav-icon" href="https://pg.js.cn"><span class="fa fa-home"></span></a>
          
        
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-poem-a-2010-2014-07-14-tong-niu" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/poem-a-2010-2014-07-14-tong-niu.html" class="article-date">
  <time class="dt-published" datetime="2014-07-13T16:00:00.000Z" itemprop="datePublished">2014-07-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/poem/">培公诗抄</a>►<a class="article-category-link" href="/categories/poem/a-2010/">2010 ~ 2014</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/poem-a-2010-2014-07-14-tong-niu.html">铜牛</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="颐和园镇水铜牛"><a href="#颐和园镇水铜牛" class="headerlink" title="颐和园镇水铜牛"></a>颐和园镇水铜牛</h2><p>落日无声听云解，</p>
<p>小桥有意任水流。</p>
<p>几见风和星斗稀，</p>
<p>历经波动鬼神愁。 </p>

      
    </div>
  </div>
  
</article>



  
    <article id="post-poem-characters-2014-06-28-jiang-zi-ya" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/poem-characters-2014-06-28-jiang-zi-ya.html" class="article-date">
  <time class="dt-published" datetime="2014-06-27T16:00:00.000Z" itemprop="datePublished">2014-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/poem/">培公诗抄</a>►<a class="article-category-link" href="/categories/poem/characters/">人物</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/poem-characters-2014-06-28-jiang-zi-ya.html">姜子牙</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>2014-6-28</p>
</blockquote>
<p>巍巍岐山凤，</p>
<p>悠悠渭水钩。</p>
<p>命在直中取，</p>
<p>不向曲中求。</p>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-lessons-2014-06-09-CentOS-git-setup" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2014-06-09-CentOS-git-setup.html" class="article-date">
  <time class="dt-published" datetime="2014-06-08T16:00:00.000Z" itemprop="datePublished">2014-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-lessons-2014-06-09-CentOS-git-setup.html">CentOS下安装git和配置git服务器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在远程仓库一节中，我们讲了远程仓库实际上和本地仓库没啥不同，纯粹为了7x24小时开机并交换大家的修改。</p>
<p>GitHub就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给GitHub交保护费，那就只能自己搭建一台Git服务器作为私有仓库使用。</p>
<p>搭建Git服务器需要准备一台运行Linux的机器，强烈推荐用Ubuntu或CentOS，这样，通过几条简单的apt或yum命令就可以完成安装。</p>
<p>假设你已经有sudo权限的用户账号，下面，正式开始安装。</p>
<h3 id="第一步，安装git："><a href="#第一步，安装git：" class="headerlink" title="第一步，安装git："></a>第一步，安装git：</h3><pre><code>yum install curl curl-devel zlib-devel openssl-devel perl cpio expat-devel gettext-devel
</code></pre>
<p>下载最新的git包</p>
<pre><code>wget http://www.codemonkey.org.uk/projects/git-snapshots/git/git-latest.tar.gz
tar xzvf git-latest.tar.gz
cd git-2011-11-30 ＃你的目录可能不是这个
autoconf
./configure --prefix=/usr/local/git
make
make install
</code></pre>
<p>检查下安装的版本，大功告成</p>
<pre><code>git --version
</code></pre>
<h3 id="第二步，创建一个git用户，用来运行git服务："><a href="#第二步，创建一个git用户，用来运行git服务：" class="headerlink" title="第二步，创建一个git用户，用来运行git服务："></a>第二步，创建一个git用户，用来运行git服务：</h3><pre><code>$ sudo adduser git
$ git config --global user.name &quot;whdsmile&quot;
$ git config --global user.email &quot;whdsmile@gmail.com&quot;
</code></pre>
<h3 id="第三步，创建证书登录："><a href="#第三步，创建证书登录：" class="headerlink" title="第三步，创建证书登录："></a>第三步，创建证书登录：</h3><p>收集所有需要登录的用户的公钥，就是他们自己的id_rsa.pub文件，把所有公钥导入到&#x2F;home&#x2F;git&#x2F;.ssh&#x2F;authorized_keys文件里，一行一个。</p>
<h3 id="第四步，初始化Git仓库："><a href="#第四步，初始化Git仓库：" class="headerlink" title="第四步，初始化Git仓库："></a>第四步，初始化Git仓库：</h3><p>先选定一个目录作为Git仓库，假定是&#x2F;srv&#x2F;sample.git，在&#x2F;srv目录下输入命令：</p>
<pre><code>$ sudo git init --bare sample.git
</code></pre>
<p>Git就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。然后，把owner改为git：</p>
<p>$ sudo chown -R git:git sample.git</p>
<h3 id="第五步，禁用shell登录："><a href="#第五步，禁用shell登录：" class="headerlink" title="第五步，禁用shell登录："></a>第五步，禁用shell登录：</h3><p>出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过编辑&#x2F;etc&#x2F;passwd文件完成。找到类似下面的一行：</p>
<pre><code>git:x:1001:1001:,,,:/home/git:/bin/bash
改为：
git:x:1001:1001:,,,:/home/git:/usr/local/git/bin/git-shell
</code></pre>
<p>这样，git用户可以正常通过ssh使用git，但无法登录shell，因为我们为git用户指定的git-shell每次一登录就自动退出。</p>
<h3 id="第六步，在-srv-sample-git目录下，假设有一个test目录："><a href="#第六步，在-srv-sample-git目录下，假设有一个test目录：" class="headerlink" title="第六步，在&#x2F;srv&#x2F;sample.git目录下，假设有一个test目录："></a>第六步，在&#x2F;srv&#x2F;sample.git目录下，假设有一个test目录：</h3><pre><code>$ git add test
$ git commit -m &quot;add file&quot;
</code></pre>
<h3 id="第七步，在开发机上克隆远程仓库："><a href="#第七步，在开发机上克隆远程仓库：" class="headerlink" title="第七步，在开发机上克隆远程仓库："></a>第七步，在开发机上克隆远程仓库：</h3><p>现在，可以通过git clone命令克隆远程仓库了，在各自的电脑上运行：</p>
<pre><code>$ git clone git@server:/srv/sample.git

Cloning into &#39;sample&#39;...
warning: You appear to have cloned an empty repository.
</code></pre>
<p>剩下的推送就简单了。</p>
<p>管理公钥</p>
<p>如果团队很小，把每个人的公钥收集起来放到服务器的&#x2F;home&#x2F;git&#x2F;.ssh&#x2F;authorized_keys文件里就是可行的。如果团队有几百号人，就没法这么玩了，这时，可以用Gitosis来管理公钥。</p>
<p>这里我们不介绍怎么玩Gitosis了，几百号人的团队基本都在500强了，相信找个高水平的Linux管理员问题不大。</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul>
<li><a href="/articles/it-env-2014-02-22-TortoiseGit-andl-msysGit-for-gitlab.html">GitLab和TortoiseGit、msysGit的配合使用</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-studio-2014-04-16-openx" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-studio-2014-04-16-openx.html" class="article-date">
  <time class="dt-published" datetime="2014-04-15T16:00:00.000Z" itemprop="datePublished">2014-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/studio/">学习笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-studio-2014-04-16-openx.html">学习OpenX广告管理与跟踪系统</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>OpenX Ad Server (简称OpenX )是一个采用PHP开发的广告管理与跟踪系统。</p>
</blockquote>
<h2 id="安装和部署"><a href="#安装和部署" class="headerlink" title="安装和部署"></a>安装和部署</h2><h3 id="配置要求"><a href="#配置要求" class="headerlink" title="配置要求"></a>配置要求</h3><ol>
<li>支持PHP</li>
<li>支持MySql</li>
</ol>
<h3 id="下载源代码"><a href="#下载源代码" class="headerlink" title="下载源代码"></a>下载源代码</h3><p>从<a target="_blank" rel="noopener" href="http://www.openxconsultant.com/blog/2013/08/openx-source-v2-8-11-released-for-download/">http://www.openxconsultant.com/blog/2013/08/openx-source-v2-8-11-released-for-download/</a>下载源代码，或者先从<a target="_blank" rel="noopener" href="http://www.openxconsultant.com/blog/category/featured/">http://www.openxconsultant.com/blog/category/featured/</a>检查最新发布。</p>
<p><strong>提示：</strong>如果研究学习源代码，可以使用SVN检出，地址：<a target="_blank" rel="noopener" href="https://svn.openx.org/openx/tags/2.8/openx-2.8.11/">https://svn.openx.org/openx/tags/2.8/openx-2.8.11/</a></p>
<h3 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h3><ol>
<li>将下载的源代码命名为“openx”，上传到WEB服务器的根目录下。</li>
<li>给var、plugins、www&#x2F;admin&#x2F;plugins、&#x2F;www&#x2F;images子目录赋予写权限。</li>
<li>在浏览器中访问http:&#x2F;&#x2F;{yourdomain}&#x2F;openx，进入到OpenX的安装界面。</li>
<li>根据提示信息设置数据库配置和管理员配置。</li>
</ol>
<p><strong>提示：</strong>选择中文简体，会出现一些乱码问题，建议采用命名和语言版本均以英文为主。时区可以选择Asia&#x2F;Shanghai。</p>
<h2 id="基本的操作和使用"><a href="#基本的操作和使用" class="headerlink" title="基本的操作和使用"></a>基本的操作和使用</h2><h3 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h3><ol>
<li>Advertisers：广告主</li>
<li>Campaigns：广告活动</li>
<li>Banners：广告</li>
<li>Websites：网站</li>
<li>Zones：广告位</li>
<li>Targeting Channels：目标频道</li>
</ol>
<h3 id="基本操作步骤"><a href="#基本操作步骤" class="headerlink" title="基本操作步骤"></a>基本操作步骤</h3><ol>
<li>添加广告主。例如：京东商城</li>
<li>为广告主添加广告活动。例如：节日大促</li>
<li>添加广告。例如：广告 980 X 90</li>
<li>添加网站。例如：<a target="_blank" rel="noopener" href="http://www.uuu.com/">http://www.uuu.com</a> </li>
<li>添加广告位。例如：广告位 980 X 90</li>
<li>链接广告到广告位</li>
<li>复制广告位代码到网站</li>
</ol>
<h3 id="添加广告主"><a href="#添加广告主" class="headerlink" title="添加广告主"></a>添加广告主</h3><p>登录系统后，进入Inventory &gt; Advertisers。</p>
<p>选择添加新广告主（Add new advertiser），进入添加新广告主界面。</p>
<p>填写广告主的基本信息（Basic information）：</p>
<ul>
<li>名称（Name）: 广告主名称必须唯一，广告主名称不能相同。 这里我们写“京东商城”</li>
<li>联系人（Contact）: 联系人将被用在所有给广告主的邮件里。</li>
<li>邮箱（Email）: 必填项，广告主的邮箱</li>
</ul>
<p>在广告主报告（Advertiser report）区域，选择什么条件以及什么时间下需要给广告主发邮件：</p>
<ul>
<li>当广告计划自动生效或者失效的时候发邮件（Email when a campaign is automatically activated&#x2F;deactivated）：OpenX会在广告计划生效或者失效的时候给广告主发邮件提醒。如果你不想发送此提醒，可以不选此框。</li>
<li>广告计划投放报告邮件（Email campaign delivery reports）： 当您想日常性的给广告主发送报告的时候选择此选择框。默认的设置是每周发送报告给广告主。如果您想修改发送报告的周期（Number of days between campaign delivery reports），只要简单的修改下周期即可。如果您给广告主提供的访问系统的帐号，则不建议发送邮件报告。</li>
</ul>
<p>其他（Miscellaneous）区域可以让您设置广告投放的限制选项：</p>
<ul>
<li>在一个页面只显示此广告主的一个广告（Display only one banner from this advertiser on a web page）： 限制广告在一个页面上只显示一次。</li>
<li>备注（Comments）： 广告主的备注信息。</li>
</ul>
<h3 id="添加广告活动"><a href="#添加广告活动" class="headerlink" title="添加广告活动"></a>添加广告活动</h3><p>完成广告主(京东商城)创建后，从广告主界面点击添加新广告活动（Add new campaign），系统将会带您到添加新广告活动的界面。</p>
<p>填写基本信息（Basic information）：</p>
<ul>
<li>名称（Name）：广告活动名称</li>
<li>广告活动的类型（Campaign type）：</li>
</ul>
<p>下一步是选择广告活动的类型。有三种活动类型可选： </p>
<ol>
<li>合约型（排期）：Contract: 合约型广告计划将会在预订的时间和显示次数内投放。  </li>
<li>合约型（买断）：Contract (Exclusive): 买断式的广告计划将会占用所有的显示资源，并且优先级高于所有其他广告计划。</li>
<li>剩余抄底：Remnant: 标准的广告计划类型，可以基于特殊的投放限制及时期来进行投放。</li>
</ol>
<p>选择好广告计划类型后，可以设置一些其他的内容：</p>
<ul>
<li>日期：Date: 输入广告计划的开始和结束日期。</li>
<li>计费模式：Pricing: 允许您设置广告计划的计费模式（CPM、CPC、APC），费率和展示次数。  </li>
<li>广告计划优先级：Priority in relation to other campaigns: 默认的优先级为5. 优先级设置级别在1到10之间（10代表优先级最高），如果需要的话，可以设置每天投放的PV&#x2F;Click或者转换的限额Set   </li>
<li>用户投放频次：Delivery capping per visitor: 此处可以设置总共以及每用户显示的限额次数。</li>
<li>其他：Miscellaneous: 如果希望隐藏与此广告计划关联的广告主和网站，可以进行设置。另外，也可以设置竞争机制，如果设置了竞争机制，则OpenX在显示的时候投放该计划下所有的广告。</li>
</ul>
<p>设置完成后，点击保存。</p>
<h3 id="添加广告"><a href="#添加广告" class="headerlink" title="添加广告"></a>添加广告</h3><ol>
<li>点击添加广告（Add new banner）链接。</li>
<li>选择广告的类型（Please choose the type of the banner）。默认为上传本地广告物料文件到Web服务器（Upload a local banner to the webserver）。</li>
<li>填写广告名字（如广告 980 X 90）</li>
<li>上传图片</li>
</ol>
<h4 id="广告类型"><a href="#广告类型" class="headerlink" title="广告类型"></a>广告类型</h4><ol>
<li><strong>使用Web服务器的本地广告</strong> 这是使用最广泛的广告类型。它用于图像广告包括JPG，GIF和PNG文件。广告上传到OpenX的广告服务器并存储在文件系统中的一个文件夹。安装系统时，默认图片文件上传到www&#x2F;images&#x2F;，并生生一个随机字符串文件名的文件。</li>
<li><strong>使用SQL的本地广告</strong> 是把广告图保存在，在数据库中的二进制数据，而不是存储在一个文件夹。</li>
<li><strong>通用的HTML广告</strong> 这可能是一个HTML网页的形式，多张图片，表格，JavaScript文件。</li>
<li><strong>通用文本横幅</strong> 适用于任何拟作为纯文本显示。简单的文本链接是受欢迎的用法。此外，也可以写长段的文本作为广告。</li>
<li><strong>外部广告（即url图片地址）</strong></li>
</ol>
<h3 id="添加网站"><a href="#添加网站" class="headerlink" title="添加网站"></a>添加网站</h3><p>进入Inventory &gt; Websites，在网站管理界面，在右上方选择添加新网站（Add new website），您将可以看到添加新网站界面。</p>
<p>创建新网站：</p>
<ul>
<li>网站URL（Website URL）: 输入您网站的URL。</li>
<li>网站名（Name）：输入网站名称。此名称将会显示在网站列表界面，注意网站名必须唯一。</li>
<li>联系人（Contact）：输入网站联系人。</li>
<li>Email: 输入网站管理员的Email地址。</li>
<li>类目（Category）：在下拉列表里选择网站的类目。</li>
<li>国家&#x2F;语言（Country&#x2F;Language）： 在下拉列表中选择相关的国家和语言。</li>
</ul>
<p>完成以上操作后点击保存，添加网站成功。</p>
<h3 id="添加广告位"><a href="#添加广告位" class="headerlink" title="添加广告位"></a>添加广告位</h3><p>进入Inventory &gt; Zones，点击添加新广告位（Add new zone）选项，到达添加新广告位页面。</p>
<p>添加新广告位：</p>
<ul>
<li>名称（Name）： 广告位名称必须唯一。如果此项为空，OpenX默认会设置一个名称，默认的是网站名称后面加上“-default”。</li>
<li>描述（Description）：输入广告位的相关信息。如广告位 980 X 90</li>
<li>行业分类（Category）：</li>
<li>类型（Zone type）：选择广告位类型（本指南有专门的页面解释各种广告位类型）</li>
<li>尺寸（Size）：必须为每个广告位选择尺寸（除了文字广告位之外），只有符合尺寸的广告创意才会在此广告位显示。下拉列表里面的尺寸都是IAB定义的标准尺寸，也可以设置自定义的尺寸。</li>
<li>备注（Comments）：广告位备注</li>
</ul>
<p>一旦完成操作点击保存，完成添加广告位。</p>
<h4 id="广告位类型"><a href="#广告位类型" class="headerlink" title="广告位类型"></a>广告位类型</h4><ol>
<li><strong>旗帜，按钮，或矩形：</strong>这是使用最广泛的广告位类型，可以显示包括图像在内的任何有创意的类型 JAVASCRIPT，HTML，等等。</li>
<li><strong>浮动广告</strong> 此广告位类型是用来显示浮动或弹出的横幅上，如出现网络浏览器的动态行为  消失了一段时间后，移动光标，等等。</li>
<li><strong>文字广告</strong> 你想要您的网站上卖文本连接，你应该使用这种类型</li>
<li><strong>电子邮件&#x2F;邮件列表版位</strong> 如果你想给你的网站用户发送电子邮件和简讯，使用此广告位，可以在电子邮件中嵌入广告横幅。</li>
</ol>
<h3 id="链接广告到广告位"><a href="#链接广告到广告位" class="headerlink" title="链接广告到广告位"></a>链接广告到广告位</h3><p>在广告位列表中，点击链接广告（Linked Banners），选择一个广告主和广告活动。</p>
<p>或者在广告的详细页面的链接广告位（Linked Zones）标签中，选择一个广告位。</p>
<h3 id="复制代码到网站"><a href="#复制代码到网站" class="headerlink" title="复制代码到网站"></a>复制代码到网站</h3><p>在广告位列表中，点击获取代码（Invocation Code）</p>
<h2 id="Openx-账户类型"><a href="#Openx-账户类型" class="headerlink" title="Openx 账户类型"></a>Openx 账户类型</h2><p>用户有一个用户名和密码，与至少一个OpenX帐户，并可以与任意数量的账户挂钩。一个用户可以有不同的连结多种帐户的多个角色。每个角色都有其自己的设置权限，定义用户可以执行相关联的帐户上的行动。</p>
<h3 id="角色和权限"><a href="#角色和权限" class="headerlink" title="角色和权限"></a>角色和权限</h3><p>系统安装后的初始用户即是管理员，又是经理。</p>
<p>进入广告主，或网站的详情编辑页面，点击用户访问（User Access）标签，在操作（Actions）下拉菜单中，可以创建或关联使用该账户访问的用户。</p>
<h4 id="管理员（Administrator）"><a href="#管理员（Administrator）" class="headerlink" title="管理员（Administrator）####"></a>管理员（Administrator）####</h4><ul>
<li>创建经理帐户</li>
<li>将用户添加到经理帐户</li>
<li>可以作为一个经理</li>
<li>创建其他管理员用户</li>
<li>查看主页和用户日志页</li>
<li>管理全球和维护设置</li>
<li>直接选择</li>
</ul>
<h4 id="经理（Manager）"><a href="#经理（Manager）" class="headerlink" title="经理（Manager）"></a>经理（Manager）</h4><ul>
<li>创建和管理广告商和网站</li>
<li>添加其他的经理帐户</li>
<li>将用户添加到广告商和网站</li>
<li>查看主页和用户日志页</li>
<li>管理帐户偏好</li>
<li>渠道管理</li>
</ul>
<h4 id="网站（Website）"><a href="#网站（Website）" class="headerlink" title="网站（Website）"></a>网站（Website）</h4><ul>
<li>创建区域</li>
<li>横幅链接到区域</li>
<li>生成调用代码</li>
<li>链接此帐户的其他用户</li>
</ul>
<h4 id="广告主（Advertiser）"><a href="#广告主（Advertiser）" class="headerlink" title="广告主（Advertiser）"></a>广告主（Advertiser）</h4><ul>
<li>查看广告活动</li>
<li>修改广告信息</li>
<li>激活广告活动</li>
<li>停用广告活动</li>
<li>链接此帐户的其他用户</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://openx.com/">OpenX官网(http://openx.com/)</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openxconsultant.com/blog/2013/08/openx-source-v2-8-11-released-for-download/">OpenX Source v2.8.11 released for download</a></li>
<li><a target="_blank" rel="noopener" href="http://download.openx.org/">OpenX源代码历史版本(http://download.openx.org/)</a></li>
<li><a target="_blank" rel="noopener" href="http://wenku.baidu.com/link?url=Cy8j6kSPXU6VRkc0umh5cSOfLh6ADzps41cddZZYPFVGylsVY2YBcBqwQw53azBG7duxkm15JxqQttraU0_8y-3S3yZae7y8b1VI3CsDKAm">Openx 用户指南</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-env-2014-02-22-TortoiseGit-andl-msysGit-for-gitlab" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-env-2014-02-22-TortoiseGit-andl-msysGit-for-gitlab.html" class="article-date">
  <time class="dt-published" datetime="2014-02-21T16:00:00.000Z" itemprop="datePublished">2014-02-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/env/">开发环境</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-env-2014-02-22-TortoiseGit-andl-msysGit-for-gitlab.html">GitLab和TortoiseGit、msysGit的配合使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h2><p>下载和安装windows下Git环境：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://tortoisegit.org/download/">TortoiseGit(https://tortoisegit.org/)</a>，是 TortoiseSVN 的 Git 变种，主要用于图形化显示。</li>
<li><a target="_blank" rel="noopener" href="https://gitforwindows.org/">msysGit(https://gitforwindows.org/)</a>，windows 下的Git 版本，是 TortoiseGit 所必须依赖的。</li>
</ol>
<p>下载完两个软件之后，首先安装 TortoiseGit，安装完 TortoiseGit 之后先别急着用，接着安装 msysGit，安装过程中的一些选项都可以默认！</p>
<h2 id="SSH密钥和Git-Bash"><a href="#SSH密钥和Git-Bash" class="headerlink" title="SSH密钥和Git Bash"></a>SSH密钥和Git Bash</h2><p>本节介绍在 Git 命令行（Git Bash）中 SSH 密钥的生成，以及在 Gitlab 上的使用。</p>
<p>使用命令行进行 Git 操作，显得高端、大气、上档次。如果你不慕虚名，只想生活简单而美好，就像使用 SVN 小乌龟（TortoiseSVN）那样工作，可以直接跳过本节。</p>
<h3 id="生成SSH密钥"><a href="#生成SSH密钥" class="headerlink" title="生成SSH密钥"></a>生成SSH密钥</h3><ol>
<li>检查当前用户目录中有没有 .ssh 目录。如果没有的话，在命令行中使用 <code>mkdir .ssh</code> 创建。</li>
<li>安装 Git 后，进入某个目录，使用右键菜单打开 “Git Bash”。</li>
<li>键入命令：<code>ssh-keygen -t rsa -C &quot;your email&quot;</code>。邮件地址可以不写，默认是 <code>本机用户名@本机机器名</code> 。最好是填写一些标识自己的记号。</li>
<li>提醒你输入 key 的名称，输入 id_rsa。<strong>注意：</strong> id_rsa 名字是固定的，因为 GitLab 只认识这个。</li>
<li>提醒你输入 key 的密码，空白即可。</li>
<li>在当前目录下产生两个密钥文件：id_rsa 和 id_rsa.pub</li>
<li>把生成的密钥文件复制到当前用户的 .ssh 目录下。</li>
</ol>
<h3 id="在-Gitlab-上添加公钥"><a href="#在-Gitlab-上添加公钥" class="headerlink" title="在 Gitlab 上添加公钥"></a>在 Gitlab 上添加公钥</h3><p>用记事本打开、复制 id_rsa.pub 文件的内容，在 Gitlab 网站 My Porfile 页面右下角，点击 Add Public Key ，粘贴刚才复制的内容到 Key 的大文本框，提交即可。</p>
<p><strong>注意：</strong>在复制内容的时候，文本的两端都不要有空格和换行。</p>
<h3 id="在命令行中进行Git操作"><a href="#在命令行中进行Git操作" class="headerlink" title="在命令行中进行Git操作"></a>在命令行中进行Git操作</h3><p>从程序目录打开 “Git Bash”（或使用右键菜单），在命令行中<code>git clone</code>一个项目。</p>
<p>提示是否把项目Git库的域名设置为可信任的已知域名，直接回答<code>yes</code>就可以了。</p>
<p>其他命令，一样的用法。不清楚的话，可以查阅《<a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">史上最浅显易懂的Git教程</a>》。</p>
<h2 id="TortoiseGit中的密钥"><a href="#TortoiseGit中的密钥" class="headerlink" title="TortoiseGit中的密钥"></a>TortoiseGit中的密钥</h2><p>本节介绍在Git小乌龟（TortoiseGit）中生成密钥，以及在Gitlab上的使用。</p>
<h3 id="生成密钥"><a href="#生成密钥" class="headerlink" title="生成密钥"></a>生成密钥</h3><ol>
<li>在开始菜单-&gt;TortoiseGit-&gt;Puttygen。这是一个用于TortoiseGit的Putty密钥生成器。</li>
<li>点击 generate 按钮。让鼠标在 generate 按钮以上、进度条以下的空白区域随机晃动，直到密钥生成完毕。</li>
<li>复制粘贴空白区域生成的SSH密钥文本（ssh-rsa。。。），在Gitlab网站My Porfile页面右下角，点击 Add Public Key ，粘贴刚才复制的内容到Key的大文本框，提交即可。<strong>注意：</strong>在复制内容的时候，文本的两端都不要有空格和换行。Title文本框随便写一些内容就可以，主要是区别不同的Key，没有特别的用途。</li>
<li>点击 save private key 按钮，把文件生成在当前用户目录下的.ssh目录中（生成的文件后缀是<code>.ppk</code>）。</li>
</ol>
<h3 id="使用右键菜单"><a href="#使用右键菜单" class="headerlink" title="使用右键菜单"></a>使用右键菜单</h3><ol>
<li>在打算<code>git clone</code>项目的目录中，右键选择<code>Git克隆</code>。</li>
<li>勾选 加载putty密钥 ，并选择上面生成的后缀是<code>.ppk</code>的私钥文件。</li>
<li>后续的操作，及除<code>git clone</code>以外的工作，就不需赘述了。</li>
</ol>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">史上最浅显易懂的Git教程</a></li>
<li><a target="_blank" rel="noopener" href="http://git-scm.com/book/zh">The entire Pro Git book</a></li>
<li><a target="_blank" rel="noopener" href="http://feiyang.me/2013/03/work-with-gitlab/">用Gitlab来工作</a></li>
<li><a target="_blank" rel="noopener" href="http://www.docin.com/p-596784591.html">GitLab使用介绍</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/bluesky8640/article/details/8171104">GitLab在windows用户端的使用教程</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/lenolix/archive/2013/02/06/2906466.html">gitlab搭建之旅</a></li>
<li><a target="_blank" rel="noopener" href="http://www.linuxidc.com/Linux/2013-05/85184.htm">在CentOS里安装GitLab</a></li>
<li><a target="_blank" rel="noopener" href="http://herry2013git.blog.163.com/blog/static/219568011201341111240751/">gitlab多人协同工作</a></li>
<li><a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/gitlab/?setlang=zh_CN">软件包详情: gitlab 6.4.0-1</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-lessons-2014-01-23-installation-and-use-of-yeoman" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2014-01-23-installation-and-use-of-yeoman.html" class="article-date">
  <time class="dt-published" datetime="2014-01-22T16:00:00.000Z" itemprop="datePublished">2014-01-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-lessons-2014-01-23-installation-and-use-of-yeoman.html">Yeoman的安装和使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><blockquote>
<p>本教程的内容较少原创，多从其他文档上摘录。</p>
</blockquote>
<p>Yeoman 1.0 包含以下三套工具，分別說明如下：</p>
<ul>
<li>yo - the scaffolding tool from Yeoman ( 用來自動產生網站骨架或程式碼的工具 )</li>
<li>bower - the package management tool ( 用來管理特定網站下所使用的各式前端套件，如: jQuery )</li>
<li>grunt - the build tool ( 用來執行一些網站的自動化工作，例如單元測試、最小化、執行批次命令 )</li>
</ul>
<p>要安裝這三套工具之前，還有許多相依的工具必須事先安裝，否則工具指令會無法正確執行，以下包括 node.js , Git for Windows 與 RubyInstaller 這三套工具的安裝注意事項：</p>
<h4 id="安裝-node-js-for-Windows"><a href="#安裝-node-js-for-Windows" class="headerlink" title="安裝 node.js for Windows"></a>安裝 node.js for Windows</h4><p>请选择正確的 Windows 安裝包，注意 CPU 架構有区分 32-bit 与 64-bit 两种：</p>
<p><img src="/images/articles/lessons/install-yeoman/node.png" alt="node安装包"></p>
<p>安裝时要确保 Add to PATH 項目有被安装进去：</p>
<p><img src="/images/articles/lessons/install-yeoman/node2.png" alt="node安装"></p>
<h4 id="安裝-Git-for-Windows-工具"><a href="#安裝-Git-for-Windows-工具" class="headerlink" title="安裝 Git for Windows 工具"></a>安裝 Git for Windows 工具</h4><p>安裝到 Adjusting your PATH environment 步骤時，选择 Run Git from the Windows Command Prompt 的相容性比较高，问题也会少很多：</p>
<p><img src="/images/articles/lessons/install-yeoman/git.png" alt="git安装"></p>
<p>其他保留预设值即可。</p>
<h4 id="安装-Ruby-执行环境"><a href="#安装-Ruby-执行环境" class="headerlink" title="安装 Ruby 执行环境"></a>安装 Ruby 执行环境</h4><p>由於前端开发作业经常会用到 Compass 工具撰写 CSS，而且在使用 Yeoman 的時候，有些产生器所产生的 grunt 定义包也会用到 Compass 来执行，所以可以预先安装好。</p>
<p>安裝 Compass 工具会需要先安裝 Ruby 才能安装与使用。建议通过 RubyInstaller (Windows) 提供的 MSI 安装包进行安裝，但安裝的过程中有一個步驟非常重要，你必須在 Installation Destination and Optional Tasks 步驟時，勾选 Add Ruby executables to your PATH 选项才行，如下图示：</p>
<p><img src="/images/articles/lessons/install-yeoman/ruby.png" alt="ruby安装"></p>
<p>安裝好这些工具之后，就可以开始准备安裝 Yeoman 相关工具了：</p>
<ol>
<li><p>打开命令行。</p>
</li>
<li><p>使用npm 安裝 yo , bower 與 grunt 工具。</p>
<pre><code> npm install -g yo grunt-cli bower
</code></pre>
<p> 其中 -g 代表要把 yo , grunt-cli , bower 這三个套件安裝到全域 (global)</p>
<p> <img src="/images/articles/lessons/install-yeoman/yo.png" alt="yo安装"></p>
</li>
<li><p>安裝 yo 相关的 程序码产生器 (generator) 套件</p>
<p> 因為 yo 這套工具主要就是用來自動產生網站骨架或程式碼，在執行 yo 之前，你必須預先安裝好這些程式碼產生器範本，這些被稱為 YEOMAN GENERATORS，你可以在 YEOMAN GENERATORS 找到許多現成的產生器範本，並且一樣透過 npm 進行安裝。</p>
<p> 例如你在 YEOMAN GENERATORS 頁面找到一個 webapp 產生器，那麼你可以用以下指令進行安裝：</p>
<pre><code> npm install -g generator-webapp
</code></pre>
<p> 如果想安裝 angular 產生器，那麼你可以用以下指令進行安裝：</p>
<pre><code> npm install -g generator-angular
</code></pre>
<p> 以此類推！</p>
</li>
<li><p>如果你要順道安裝 Compass 的話，也可以輸入以下指令進行安裝</p>
<pre><code> gem update --system
 gem install compass
</code></pre>
<p> Yeoman 與 Compass 安裝完成！</p>
</li>
</ol>
<h2 id="Yeoman-的使用"><a href="#Yeoman-的使用" class="headerlink" title="Yeoman 的使用"></a>Yeoman 的使用</h2><ol>
<li><p>先创建一个网站目录，例如webapp。</p>
</li>
<li><p>在这个目录下，命令行执行命令，产生网站骨架：</p>
</li>
<li><p> yo angular</p>
<p> 这是一個交互的过程，yo安装哪些模块：</p>
<p> <img src="/images/articles/lessons/install-yeoman/create.png" alt="创建网站"><br> 安装完成后可能会遇到一些问题，如：<br> <img src="/images/articles/lessons/install-yeoman/create2.png" alt="创建网站"><br> 表示依赖的模块需要手动bower install &amp; npm install安装。</p>
</li>
</ol>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-studio-2013-11-16-semantic-versioning-2-0-0" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-studio-2013-11-16-semantic-versioning-2-0-0.html" class="article-date">
  <time class="dt-published" datetime="2013-11-15T16:00:00.000Z" itemprop="datePublished">2013-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/studio/">学习笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-studio-2013-11-16-semantic-versioning-2-0-0.html">语义化版本控制 2.0.0</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>译者注1：Semantic Versioning 2.0.0的原文地址是<a target="_blank" rel="noopener" href="http://semver.org/">http://semver.org</a></p>
</blockquote>
<h2 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h2><p>版本号MAJOR.MINOR.PATCH（主版本号.副版本号.补丁版本号）的递增规则如下：</p>
<ol>
<li>当以不向后兼容的方式，变更API时，递增主版本号。</li>
<li>当以向后兼容的方式，增加功能时，递增副版本号。</li>
<li>当以向后兼容的方式，修正BUG时，递增补丁版本号。</li>
</ol>
<p>预发布信息和构建元数据可以作为附加标签，扩展MAJOR.MINOR.PATCH（主版本号.副版本号.补丁版本号）的格式。</p>
<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>在软件开发管理的世界里，有一个可怕的地方叫做“依赖关系地狱”。当你的系统越来越大，集成了更多的包，你就会深刻的认识到自己的卑微和渺小。直到有一天，你在这个坑里彻底绝望。</p>
<p>系统依赖的模块发布新版本，就成了噩梦。如果依赖关系的规定过于严格，会遇到一个版本依赖关系的死结（升级一个依赖包之前，必须升级完所有的依赖包）。如果依赖关系规定的太松散，版本依赖关系的混乱就会成为你的切肤之痛（假定你的版本兼容性很重要）。当版本依赖关系的死结、混乱，让你不能轻松、安全的向前迁移项目的时，你就坠入了“依赖关系地狱”。</p>
<p>为了解决这个问题，我提出了一套简单的规则和要求，决定版本号如何分配和递增。这些规则都是基于（但不限于）业界早已存在的流行做法。使用此制度的软件必须声明一个公共API，可以在代码内部声明，也可以严格地写入文档中，但必须是清晰而准确的。一旦确定了公共API，都必须通过明确的版本号递增，来表明系统所做的变更。认真考虑一下X.Y.Z（主版本号.副版本号.补丁版本号）的版本格式。不影响API的BUG修正,递增补丁版本号。向后兼容API的功能新增或变更，递增副版本号。不向后兼容的API变更，递增主版本号。</p>
<p>我把这个制度称为“语义化版本控制”。在这个方案中，规范了从一个版本到下一个版本的版本号，规范了更改版本号传达源代码意图的方法，以及源代码做了什么样的修改。</p>
<h2 id="语义化版本控制规范（SemVer）"><a href="#语义化版本控制规范（SemVer）" class="headerlink" title="语义化版本控制规范（SemVer）"></a>语义化版本控制规范（SemVer）</h2><p>在本文档中，对关键词（”MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”）的使用，遵循<a target="_blank" rel="noopener" href="http://tools.ietf.org/html/rfc2119">RFC2119标准</a>的规范。</p>
<blockquote>
<p>译者注2：RFC2119标准规范了表示“要求”（Requirement）的动词涵义。关于RFC2119标准可以参考《<a target="_blank" rel="noopener" href="http://blog.csdn.net/bryangg/article/details/2443488">RFC2119 中文版-RFC文档用于指出要求级别的关键字</a>》。</p>
</blockquote>
<ol>
<li>使用语义化版本控制的软件必须（MUST）声明一个公共的API。这个API可以在源代码的内部声明，也可以在文档中严格的定义。无论怎么做，都应该是清晰而全面的。</li>
<li>一个标准的版本号必须（MUST）是X.Y.Z的形式。其中的X、Y和Z都要是正整数，并且禁止（MUST NOT）包含前导零。X是主版本号，Y是副版本号，Z是补丁版本号。每个元素数字的递增，必须（MUST）是1。例如：<code>1.9.0 -&gt; 1.10.0 -&gt; 1.110</code></li>
<li>一旦发布一个包的版本，该版本的内容禁止（MUST NOT）再做任何修改。任何的修改都必须（MUST）发布一个新的版本。</li>
<li>主版本0（0.y.z）用于初始开发。此时的公共API随时都可能会改动，是不稳定的。</li>
<li>在1.0.0版本中，公共API作出正式的定义。后续的版本号变更，都决定于公共API是否变更，以及如何变更。</li>
<li>以向后兼容的方式修正BUG时，必须（MUST）递增补丁版本号Z(x.y.Z | x &gt; 0)。BUG修正的定义，是在源代码内部修正错误的行为。</li>
<li>当以向后兼容的方式变更公共API时，或者公共API中原有的功能标记为“不建议使用（deprecated）”时，必须（MUST）递增副版本号Y(x.Y.z | x &gt; 0 )。源代码内部大量增加、修改功能时，也可以（MAY）递增副版本号。副版本号的递增可以（MAY）包括补丁版本的更新内容。副版本号递增后，补丁版本号必须（MUST）重置为0。</li>
<li>当以不向后兼容性的方式，变更公共API时，必须（MUST）递增主版本号X(X.y.z | X &gt; 0)，可以（MAY）包含副版本和补丁版本级别的变更。主版本递增后，副版本号和补丁版本号必须（MUST）重置为0。</li>
<li>预发布的版本号，可以（MAY）在补丁版本号后面，添加一个破折号和一系列被点分割的标识符。这些标识符必须（MUST）由ASCII码中的字母和数字以及连字符[0-9A-Za-z-]组成。标识符禁止（MUST NOT）为空。数字禁止（MUST NOT）包含前导0。预发布版本号的优先级比正常的版本号低。预发布版本号表示该版本是不稳定的，可能无法达到其指明的正常版本号的兼容性预期。例如：<code>1.0.0-alpha, 1.0.0-alpha.1, 1.0.0-0.3.7, 1.0.0-x.7.z.92</code>。</li>
<li>构建的元数据，可以（MAY）在补丁版本号或预发布版本号后面，添加一个加号和一系列由连字符分隔的标示符组成。这些标识符必须（MUST）由ASCII码中的字母和数字以及连字符[0-9A-Za-z-]组成。标识符禁止（MUST NOT）为空。在确定版本号的优先级时，构建元数据应该（SHOULD）被忽略。因此，如果两个版本号的差异，仅仅在于构建元数据，就视为具有相同的优先级。例如：<code>1.0.0-alpha+001, 1.0.0+20130313144700, 1.0.0-beta+exp.sha.5114f85</code>。</li>
<li>优先级是指在排序时，版本号之间如何进行比较。优先级必须（MUST）是，根据版本号按照主版本号、副版本号、补丁版本号和预发布标识的顺序进行计算产生的（构建元数据不参与优先级的比较）。优先级总是从左到右的，依次比较主版本号、副版本号、补丁版本号的数字大小。例如：<code>1.0.0 &lt; 2.0.0 &lt; 2.1.0 &lt; 2.1.1</code>。在主版本号、副版本号、补丁版本号都相同时，预发布版本号的优先级低于正常版本号。例如：<code>1.0.0-alpha &lt; 1.0.0</code>。两个预发布版本号的主版本号、副版本号、补丁版本号都相同时，优先级必须（MUST）从左至右的比较由点分隔的标识符，直到发现差异。标识符仅由数字组成的，比较数字的大小。标识符包含字母或连字符的，按照ASCII码的顺序进行比较。数字标识符总是小于非数字标识符。如果前面所有的标识符都是相同的，版本号中预发布字段较长的，优先级较高。例如：<code>1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0-rc.1 &lt; 1.0.0</code>。</li>
</ol>
<h2 id="为什么要使用语义化版本控制"><a href="#为什么要使用语义化版本控制" class="headerlink" title="为什么要使用语义化版本控制"></a>为什么要使用语义化版本控制</h2><p>语义化版本控制并不新鲜，也不是一个革命性的想法。事实上，你可能做了很多，已经完成了这件事。问题是完成并不等于极致。如果不符合某种正式的规范，版本号在依赖关系管理上基本没有什么用处。给上述想法起个名字，做出清晰的定义，就很容易向软件用户传达你的意图。一旦这些意图是明确的，一个灵活的（但也不能太灵活）依赖关系管理规范，就流畅的运转起来了。</p>
<p>举一个简单的例子，说明语义化版本控制如何把你从“依赖关系地狱”中拯救出来。设想一个叫“消防车”的库，依赖一个使用语义化版本控制的包，名叫“梯子”。“消防车”刚刚生产出来的时候，梯子的版本号是3.1.0。由于“消防车”使用了在3.1.0版本才开始提供的一些功能，你就可以放心地指定依赖的“梯子”的版本大于等于3.1.0，但低于4.0.0。现在，当“梯子”有3.1.1和3.2.0的版本可用时，就可以更新到你的包管理系统，并知道他们将与当前依赖的软件兼容。</p>
<p>作为一个负责任开发者，你当然会验证任何包所标榜的新功能。现实世界可是一个鱼龙混杂的地方，做什么事情都可以，但要警惕。你可以让语义化版本控制，给你提供一个稳健的方式来发布和升级包，不必再被迫为使用依赖包的新版本而反复折腾，为你节省时间，减少麻烦。</p>
<p>如果这一切听起来还不错，你需要做的所有事情，就是开始声明你正在使用语义化版本控制，并遵循其规则。欢迎你在README文档中链接这个网站(译者注3)，让更多的人知道这个规则，并从中受益。</p>
<blockquote>
<p>译者注3：原文中提到的网站是指<a target="_blank" rel="noopener" href="http://semver.org/">http://semver.org</a>。</p>
</blockquote>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="在0-y-z的初始开发阶段，我应该怎么处理我的修订？"><a href="#在0-y-z的初始开发阶段，我应该怎么处理我的修订？" class="headerlink" title="在0.y.z的初始开发阶段，我应该怎么处理我的修订？"></a>在0.y.z的初始开发阶段，我应该怎么处理我的修订？</h3><p>最简单的做法就是从0.1.0版本开始你的初始开发，在后续的发布中递增副版本号。</p>
<h3 id="我怎么知道什么时候发布1-0-0版本？"><a href="#我怎么知道什么时候发布1-0-0版本？" class="headerlink" title="我怎么知道什么时候发布1.0.0版本？"></a>我怎么知道什么时候发布1.0.0版本？</h3><p>如果你的软件在产品环境中使用，它可能已经应该是1.0.0。如果的软件用户，已经开始依赖一个稳定的API，应该是1.0.0。如果你担心很多向后兼容的问题，应该已经是1.0.0。</p>
<h3 id="这难道不会妨碍快速开发和快速迭代吗？"><a href="#这难道不会妨碍快速开发和快速迭代吗？" class="headerlink" title="这难道不会妨碍快速开发和快速迭代吗？"></a>这难道不会妨碍快速开发和快速迭代吗？</h3><p>所有在快速开发和快速迭代的时候，主版本号都是0。如果你的API每天都在改变，仍然应该会在版本0.y.z阶段。或者，在一个单独的开发分支中，开展下一个主版本的开发工作。</p>
<h3 id="公共API如果连最微小的向后不兼容的改变，都需要一个主版本号的冲击，会不会太迅速的就到了42-0-0版本？"><a href="#公共API如果连最微小的向后不兼容的改变，都需要一个主版本号的冲击，会不会太迅速的就到了42-0-0版本？" class="headerlink" title="公共API如果连最微小的向后不兼容的改变，都需要一个主版本号的冲击，会不会太迅速的就到了42.0.0版本？"></a>公共API如果连最微小的向后不兼容的改变，都需要一个主版本号的冲击，会不会太迅速的就到了42.0.0版本？</h3><p>这是一个负责任的开发问题，也是一个有远见的问题。在有大量依赖关系管理的软件中，不应该轻率的推出不兼容的改变。升级所必须付出的成本是有意义的。发布冲击主版本号的不兼容改变，意味着你深思熟虑过将要发生的震荡，有磕碰主要版本发布不兼容的改变意味着你想通过你的变化的影响，并评估过所涉及的投入产出比。</p>
<h3 id="记录整个公共API是​太辛苦了！"><a href="#记录整个公共API是​太辛苦了！" class="headerlink" title="记录整个公共API是​太辛苦了！"></a>记录整个公共API是​太辛苦了！</h3><p>为预计会给其他人使用的软件，提供适当的文档，是一个专业开发者的责任。控制软件的复杂性，是保持项目高效的一个非常重要的组成部分。如果没有谁知道如何使用你的软件，或者用什么方法可以安全地调用，保持项目高效是很难做到的。从长远来看，采用语义化版本控制，坚定的看守一个定义良好的公共API，可以让每一个人都能流畅的做每一件事。</p>
<h3 id="如果不小心，使用副版本号发布了一个不能向后兼容的变更，该怎么办啊？"><a href="#如果不小心，使用副版本号发布了一个不能向后兼容的变更，该怎么办啊？" class="headerlink" title="如果不小心，使用副版本号发布了一个不能向后兼容的变更，该怎么办啊？"></a>如果不小心，使用副版本号发布了一个不能向后兼容的变更，该怎么办啊？</h3><p>一旦意识到已经破坏了语义化版本规范，要发布修正了问题，并且恢复向后兼容的新的主版本号。即便是这样，这也是一次不能接受的版本发布。如果方便，一定要记录有问题的版本，并通知你的用户，让他们意识到问题的存在。</p>
<h3 id="如果更新了自己的依赖-但不改变公共API，版本号应该怎么规划？"><a href="#如果更新了自己的依赖-但不改变公共API，版本号应该怎么规划？" class="headerlink" title="如果更新了自己的依赖  但不改变公共API，版本号应该怎么规划？"></a>如果更新了自己的依赖  但不改变公共API，版本号应该怎么规划？</h3><p>这是向后兼容的，因为不影响公共API。如果软件与你的包有相同的依赖，有可能会有自己的依赖关系规范，而且软件的作者也会关切任何有可能的冲突。确定这个依赖变更是补丁级别的，还是副版本级别的，取决于你更新你的依赖是要修正一个BUG，还要要引入一组新的功能。我们通常期待是后者，哪怕增加大量的代码。因为在这种情况下，就显然是一个副版本级别的变更了。</p>
<h3 id="如果在不经意间，以不符合版本规范的方式，改了变公共API怎么办（也就是，在一个补丁版本的发布中，源代码错误的引入了一个主版本级别的重大变更）？"><a href="#如果在不经意间，以不符合版本规范的方式，改了变公共API怎么办（也就是，在一个补丁版本的发布中，源代码错误的引入了一个主版本级别的重大变更）？" class="headerlink" title="如果在不经意间，以不符合版本规范的方式，改了变公共API怎么办（也就是，在一个补丁版本的发布中，源代码错误的引入了一个主版本级别的重大变更）？"></a>如果在不经意间，以不符合版本规范的方式，改了变公共API怎么办（也就是，在一个补丁版本的发布中，源代码错误的引入了一个主版本级别的重大变更）？</h3><p>那你就发挥出色的判断能力吧。如果拥有大量的忠实拥趸，愿意委曲求全的回到公共API的预期轨道上来，那你最好发布一个主版本。哪怕没什么修改，严格的说也只是补丁级别的。请记住，语义化版本控制是通过版本号的变更来传达意图的。如果变更对你的用户很重要，就使用版本号通知他们。</p>
<h3 id="我应该如何处理以后要废弃的功能？"><a href="#我应该如何处理以后要废弃的功能？" class="headerlink" title="我应该如何处理以后要废弃的功能？"></a>我应该如何处理以后要废弃的功能？</h3><p>废弃某些功能，在软件开发中很常见的，通常也会推动软件向前发展。</p>
<p>在废弃公共API的一部分时，你要做两件事：</p>
<ol>
<li>更新你的文档，让用户知道这些变更。</li>
<li>发布包含废弃功能的副版本。</li>
</ol>
<p>你在主版本中彻底删除这些功能之前，至少要在发布的一个副版本中包含这些功能，好让用户平滑的迁移到新的API上来。</p>
<h3 id="在语义化版本控制中，版本号的长度有限制吗？"><a href="#在语义化版本控制中，版本号的长度有限制吗？" class="headerlink" title="在语义化版本控制中，版本号的长度有限制吗？"></a>在语义化版本控制中，版本号的长度有限制吗？</h3><p>没有什么限制，但是你最好保持理智。比如，一个版本号有255个字符，就有点出格了。另外，在开发团队中具体的制度可能会有一些自定义的长度限制。</p>
<h2 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h2><p>语义化版本控制规范是由<a target="_blank" rel="noopener" href="http://tom.preston-werner.com/">Tom Preston-Werner</a>编写的。他是<a target="_blank" rel="noopener" href="http://en.gravatar.com/">Gravatars</a> 的创始人，也是<a target="_blank" rel="noopener" href="https://github.com/">GitHub</a>的共同创办人。</p>
<p>如果你有一些反馈，可以在<a target="_blank" rel="noopener" href="https://github.com/mojombo/semver/issues">GitHub上提交一个问题</a>。</p>
<h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a>许可证</h2><p><a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by/3.0/">知识共享 - CC 3.0</a></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.fallhunter.com/p/10555">语义化版本号 Sematic Versioning(http://www.fallhunter.com/p/10555)</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.neekey.me/blog/2012/02/27/semantic-versioning/">Semantic Versioning 语义化版本号(http://blog.neekey.me/blog/2012/02/27/semantic-versioning/)</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/bryangg/article/details/2443488">RFC2119 中文版-RFC文档用于指出要求级别的关键字</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-lessons-2013-10-24-build-api-document-by-jsdoc3" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2013-10-24-build-api-document-by-jsdoc3.html" class="article-date">
  <time class="dt-published" datetime="2013-10-23T16:00:00.000Z" itemprop="datePublished">2013-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-lessons-2013-10-24-build-api-document-by-jsdoc3.html">使用JSDoc3生成javascript项目的API文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="JSDoc样式的注释"><a href="#JSDoc样式的注释" class="headerlink" title="JSDoc样式的注释"></a>JSDoc样式的注释</h2><blockquote>
<p>选用JSDoc3作为注释规范，文档生成工具使用grunt-jsdoc，本文不再介绍选型过程和原因。对JSDoc3的深入学习使用，可以参考<a target="_blank" rel="noopener" href="http://usejsdoc.org/index.html">入门教程http://usejsdoc.org/index.html</a>。</p>
</blockquote>
<p>JSDoc注释的样式如下例，与单行注释 <code>//</code> 和多行注释 <code>/**/</code> 不同，而是类似于JAVA的JDoc和PHP的PHPDoc。</p>
<pre><code>/**
* JSDoc注释。
*/
</code></pre>
<h2 id="JSDoc的常用标签"><a href="#JSDoc的常用标签" class="headerlink" title="JSDoc的常用标签"></a>JSDoc的常用标签</h2><h3 id="函数注释示例"><a href="#函数注释示例" class="headerlink" title="函数注释示例"></a>函数注释示例</h3><pre><code>/**
* 函数注释的示例。
* @param &#123;Integer&#125; augend 被加数。
* @param &#123;Integer&#125; addend 加数。
* @return &#123;Integer&#125; 两数之和。
* @example
* add(1, 2) =&gt; 3
*/
function add(augend, addend)&#123;
    return augend + addend;
&#125;
</code></pre>
<h3 id="参数注释"><a href="#参数注释" class="headerlink" title="参数注释"></a>参数注释</h3><p><code>@param</code> 用于对函数、类的方法的参数进行注释，是JSDoc中最常用的注释标签。</p>
<p><code>@param</code> 注释必须指定一个参数名，也可以有一个用大括号括起来的参数类型，以及参数的描述信息。参数类型可以是javascript内置的数据类型，如Array、Boolean、Date、Function、Number Object 、String 等，还可以是其他JSDoc所支持的（英文没看太懂，以后用到再认真学习）。</p>
<blockquote>
<p>The parameter type can be a built-in JavaScript type, such as string or Object, or a JSDoc namepath to another symbol in your code. If you have written documentation for the symbol at that namepath, JSDoc will automatically link to the documentation for that symbol. You can also use a type expression to indicate, for example, that a parameter is not nullable or can accept any type; see the @type documentation for details.</p>
</blockquote>
<p>下面直接使用<a target="_blank" rel="noopener" href="http://usejsdoc.org/tags-param.html">http://usejsdoc.org/tags-param.html</a>文档中的例子，说明 <code>@param</code> 标签中如何使用参数名、参数类型和参数描述信息。</p>
<p>只有参数名的注释：</p>
<pre><code>/**
 * @param somebody
 */
function sayHello(somebody) &#123;
    alert(&#39;Hello &#39; + somebody);
&#125;
</code></pre>
<p>包括参数名和参数类型的注释：</p>
<pre><code>/**
 * @param &#123;string&#125; somebody
 */
function sayHello(somebody) &#123;
    alert(&#39;Hello &#39; + somebody);
&#125;
</code></pre>
<p>包括参数名、参数类型和参数描述的注释：</p>
<pre><code>/**
 * @param &#123;string&#125; somebody Somebody&#39;s name.
 */
function sayHello(somebody) &#123;
    alert(&#39;Hello &#39; + somebody);
&#125;
</code></pre>
<h3 id="返回值注释"><a href="#返回值注释" class="headerlink" title="返回值注释"></a>返回值注释</h3><p><code>@return</code> 说明函数的返回值。例如：</p>
<ul>
<li><code>@return &#123;Number&#125;</code></li>
<li><code>@return &#123;Number&#125; Sum of a and b</code></li>
<li><code>@return &#123;Number|Array&#125; Sum of a and b or an array that contains a, b and the sum of a and b.</code></li>
</ul>
<blockquote>
<p>参见：<a target="_blank" rel="noopener" href="http://usejsdoc.org/tags-returns.html">http://usejsdoc.org/tags-returns.html</a></p>
</blockquote>
<h3 id="模块注释"><a href="#模块注释" class="headerlink" title="模块注释"></a>模块注释</h3><p><code>@module</code>标签用于标记当前代码文件属于哪个模块。</p>
<p>在 <code>@link</code> 或 <code>@see</code> 标签中，使用 <code>module:moduleName</code> 可以链接到一个模块。例如，使用 <code>&#123;@link module:foo/bar&#125;</code>，可以链接到由 <code>&quot;@module foo/bar</code> 定义的模块。</p>
<p>如果没有提供模块名，将使用模块文件所在路径及文件名作模块名。</p>
<h3 id="参考引用注释"><a href="#参考引用注释" class="headerlink" title="参考引用注释"></a>参考引用注释</h3><p><code> @see</code> 标签可以指向一个相关的引用。示例如下：</p>
<pre><code>/**
 * Both of these will link to the bar function.
 * @see &#123;@link bar&#125;
 * @see bar
 */
function foo() &#123;&#125;

// Use the inline &#123;@link&#125; tag to include a link within a free-form description.
/**
 * @see &#123;@link foo&#125; for further information.
 * @see &#123;@link http://github.com|GitHub&#125;
 */
function bar() &#123;&#125;
</code></pre>
<h3 id="类的注释"><a href="#类的注释" class="headerlink" title="类的注释"></a>类的注释</h3><ul>
<li><code>@name</code> ：类名称</li>
<li><code>@class</code> ：类描述</li>
<li><code>@constructor</code> ：表明这是一个构造函数，非常重要。</li>
<li><code>@extends</code>	:类继承的父类。</li>
<li><code>@type</code>	：数据的类型，主要用来注释属性。</li>
<li><code>@default</code>	：默认值，主要用来注释属性。</li>
<li><code>@abstract</code> 标明一个成员是抽象的，需要子类去实现。</li>
<li><code>@public</code>、<code>@protected</code>、<code>@private</code>：类、方法或属性的访问权限</li>
</ul>
<h3 id="类的注释示例"><a href="#类的注释示例" class="headerlink" title="类的注释示例"></a>类的注释示例</h3><p>要把JSDoc3的注释生成API类库文档，<code>@lends</code> 是个很要紧的标签。</p>
<p>例如，<code>@lends Sample.prototype</code> 表示下面的对象归属于Sample。</p>
<p>较详尽的使用说明参见<a target="_blank" rel="noopener" href="http://usejsdoc.org/tags-lends.html">http://usejsdoc.org/tags-lends.html</a>。</p>
<p>有关类的定义和注释示例，如下：</p>
<pre><code>/**
* @name Sample
* @class 示例类
* @public
* @constructor
*/
function Sample()&#123;
    this.something = [];
&#125;

Sample.prototype = 
/** @lends Sample.prototype*/
&#123;
    /**
    * 属性示例。
    * @private
    * @type &#123;Array&#125;
    * @default []
    */
    something : [],

    /**
    * 方法示例。
    * @public
    * @param &#123;String&#125; arg 跟踪方法插件。
    */
    doSomething: function(arg)&#123;
    &#125;
&#125;;
</code></pre>
<h3 id="其他常用注释"><a href="#其他常用注释" class="headerlink" title="其他常用注释"></a>其他常用注释</h3><ul>
<li><p><code>@example</code>	: 示例代码。</p>
</li>
<li><p><code>@enum [&lt;type&gt;]</code>	: 一组同样类型的静态属性集合。<code>switch</code> 语句中的分支应该只使用枚举。</p>
</li>
<li><p><code>@overview	</code>	：对当前代码文件的描述。</p>
</li>
<li><p><code>@copyright</code>	：代码的版权信息。</p>
</li>
<li><p><code>@author &lt;name&gt; [&lt;emailAddress&gt;]</code>	：代码的作者信息。</p>
</li>
<li><p><code>@version</code>		：当前代码的版本。</p>
</li>
</ul>
<h4 id="README-md-是很好的"><a href="#README-md-是很好的" class="headerlink" title="README.md 是很好的"></a>README.md 是很好的</h4><p>如果你有为项目写说明文档的好习惯，碰巧又使用的是MarkDown格式，碰巧文件名又是README.md，那就很好了。</p>
<p>把README.md文件放在代码清单里边，JSDoc工具是自动为你生成API文档的首页，什么系统概况、设计需求、设计方案及版本更新记录等等的内容都可以放进来。</p>
<h2 id="Grunt自动构建的配置"><a href="#Grunt自动构建的配置" class="headerlink" title="Grunt自动构建的配置"></a>Grunt自动构建的配置</h2><p>Grunt的安装使用，请参考教程<a href="/lessons/2013/10/15/installation-and-use-of-grunt/">《Grunt的安装和使用》</a>。</p>
<p><strong>提示：</strong>JSDoc某些配置有git依赖， 需要在命令行中可以执行git命令。最好先安装一个msysgit(<a target="_blank" rel="noopener" href="http://msysgit.github.io/)%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%B8%AD%E5%A2%9E%E5%8A%A0git%E7%9A%84bin%E7%9B%AE%E5%BD%95%E3%80%82">http://msysgit.github.io/)，然后在环境变量中增加git的bin目录。</a></p>
<p>使用JSDoc3插件，在package.json中的NPM依赖配置参考，如下：</p>
<pre><code>&quot;devDependencies&quot;: &#123;
    ... ...
    &quot;grunt-jsdoc&quot;: &quot;~0.5.4&quot;,
    &quot;ink-docstrap&quot;: &quot;~0.3.0&quot;,
    ... ...
&#125;
</code></pre>
<p>使用JSDoc3插件，在Gruntfile中的配置参考，如下：</p>
<pre><code>jsdoc: &#123;
  dist : &#123;
      src: [&#39;README.md&#39;, &#39;src/sample.js&#39;], 
      options: &#123;
        destination: &#39;api&#39;,
        template: &quot;libs/jsdoc3/docstrap/template&quot;,
        configure: &quot;libs/jsdoc3/docstrap/template/jsdoc.conf.json&quot;            
      &#125;
  &#125;
&#125;
</code></pre>
<p>详细使用方法和参数，参考：<a target="_blank" rel="noopener" href="https://github.com/krampstudio/grunt-jsdoc-plugin">https://github.com/krampstudio/grunt-jsdoc-plugin</a>。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://usejsdoc.org/index.html">JSDoc 主页</a> - <a target="_blank" rel="noopener" href="https://github.com/jsdoc3/jsdoc">GitHub</a></li>
<li>grunt-jsdoc-plugin Grunt任务插件 <a target="_blank" rel="noopener" href="https://npmjs.org/package/grunt-jsdoc">NPM</a> - <a target="_blank" rel="noopener" href="https://github.com/krampstudio/grunt-jsdoc-plugin">GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/terryweiss/docstrap">JSDoc模板docstrap</a></li>
<li><a target="_blank" rel="noopener" href="http://www.36ria.com/5101">使用jsdoc生成组件API文档—jsdoc实战</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-lessons-2013-10-15-installation-and-use-of-grunt" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2013-10-15-installation-and-use-of-grunt.html" class="article-date">
  <time class="dt-published" datetime="2013-10-14T16:00:00.000Z" itemprop="datePublished">2013-10-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-lessons-2013-10-15-installation-and-use-of-grunt.html">Grunt的安装和使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="安装Grunt前的准备"><a href="#安装Grunt前的准备" class="headerlink" title="安装Grunt前的准备"></a>安装Grunt前的准备</h2><blockquote>
<p>本教程的内容较少原创，多从其他文档上摘录，详见参考资料部分。</p>
</blockquote>
<p>Grunt是一个自动化的项目构建工具。Grunt和Grunt的插件都是通过Node.js的包管理器npm来安装和管理的。</p>
<p>如果还没有安装Node.js，需要先从<a target="_blank" rel="noopener" href="http://nodejs.org/">Node.js网站(http://nodejs.org/)</a>下载安装。</p>
<blockquote>
<p>Node.js安装中，以及后继的其他安装中，可能需要系统管理员权限。</p>
</blockquote>
<blockquote>
<p>安装Grunt之前，可以在命令行中运行<code>node -v</code>查看你的Node.js版本。0.8.0及以上版本的Node.js才能很好的运行Grunt。</p>
</blockquote>
<h2 id="安装Grunt的命令行接口"><a href="#安装Grunt的命令行接口" class="headerlink" title="安装Grunt的命令行接口"></a>安装Grunt的命令行接口</h2><p>为了方便使用Grunt，你应该在全局范围内安装Grunt的命令行接口(CLI)。</p>
<p>在命令行中，执行如下命令：</p>
<pre><code>npm install -g grunt-cli
</code></pre>
<p>这条命令将会把grunt命令植入到你的系统路径中，这样就允许你从任意目录来运行它(定位到任意目录运行grunt命令)。</p>
<h2 id="认识Grunt的两个常用文件"><a href="#认识Grunt的两个常用文件" class="headerlink" title="认识Grunt的两个常用文件"></a>认识Grunt的两个常用文件</h2><p>使用Grunt构建的项目中，大多包含有package.json和Gruntfile。</p>
<p><strong>package.json</strong>：用于存储已经作为npm模块发布的项目元数据(也就是依赖模块，包括Grunt本身)。</p>
<p><strong>Gruntfile.js</strong>：用于配置或者定义Grunt任务和加载Grunt插件。</p>
<h2 id="用一个现有的Grunt项目进行工作"><a href="#用一个现有的Grunt项目进行工作" class="headerlink" title="用一个现有的Grunt项目进行工作"></a>用一个现有的Grunt项目进行工作</h2><p>如果已经安装好了Grunt的命令行接口(CLI)，并且项目中已经有了package.json和Gruntfile，使用Grunt进行工作是非常容易的。</p>
<h3 id="安装Grunt和相关Grunt插件"><a href="#安装Grunt和相关Grunt插件" class="headerlink" title="安装Grunt和相关Grunt插件"></a>安装Grunt和相关Grunt插件</h3><ol>
<li>进入项目目录(在命令行窗口定位到项目目录；在windows系统下，也可以进入项目文件夹后，按Shift+鼠标右键，打开右键菜单，选择“在此处打开命令窗口(W)”)。</li>
<li>在命令行中，运行 <code>npm install</code>，安装项目相关依赖(插件，Grunt内置任务等依赖)。</li>
</ol>
<blockquote>
<p>有些Grunt插件，比如JSDoc3插件，需要在命令行中可以执行git命令。最好先安装一个msysgit(<a target="_blank" rel="noopener" href="http://msysgit.github.io/)%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%B8%AD%E5%A2%9E%E5%8A%A0git%E7%9A%84bin%E7%9B%AE%E5%BD%95%E3%80%82">http://msysgit.github.io/)，然后在环境变量中增加git的bin目录。</a></p>
</blockquote>
<h3 id="执行Grunt构建"><a href="#执行Grunt构建" class="headerlink" title="执行Grunt构建"></a>执行Grunt构建</h3><p>在上述的命令行中执行 <code>grunt</code>，就可以运行Grunt构建了。</p>
<blockquote>
<p>至此，通过安装Node.js、在命令行中运行 <code>npm install -g grunt-cli</code>、<code>npm install</code> 和 <code>grunt</code>三个命令，就完成了使用现有的Grunt项目进行工作的所有准备。</p>
</blockquote>
<h2 id="准备一个新的Grunt项目"><a href="#准备一个新的Grunt项目" class="headerlink" title="准备一个新的Grunt项目"></a>准备一个新的Grunt项目</h2><h3 id="快速工作的项目脚手架"><a href="#快速工作的项目脚手架" class="headerlink" title="快速工作的项目脚手架"></a>快速工作的项目脚手架</h3><p>有很多项目的结构和内容都很类似，人们就设计开发了可以快速工作的模板，能够通过模板迅速的自动创建项目，称为脚手架工具（<code>grunt-init</code>）。</p>
<p>在Grunt的GitHub主页（<a target="_blank" rel="noopener" href="https://github.com/gruntjs">https://github.com/gruntjs</a>）上有很多之用的 <code>grunt-init-*</code> 脚本架模板工具，比如grunt-init-jquery、grunt-init-gruntplugin等等。</p>
<h4 id="安装grunt-init"><a href="#安装grunt-init" class="headerlink" title="安装grunt-init"></a>安装grunt-init</h4><p><code>grunt-init</code> 是一个用于自动创建项目的脚手架工具。</p>
<p>先在命令行中进行全局安装：</p>
<pre><code>npm install -g grunt-init
</code></pre>
<p>这样，会把grunt-init命令植入到你的系统路径，从而允许你在任何目录中都可以运行它。</p>
<h4 id="安装和使用grunt-init模板"><a href="#安装和使用grunt-init模板" class="headerlink" title="安装和使用grunt-init模板"></a>安装和使用grunt-init模板</h4><p>把需要的模板放在你的 <code>~/.grunt-init/</code> 目录中（在Windows平台是%USERPROFILE%&#x2F;.grunt-init目录）。</p>
<blockquote>
<p><code>%USERPROFILE%</code> 一般是指“C:\Users\你的用户名”这个目录。</p>
</blockquote>
<p>建议使用如下的git clone命令把这个模板克隆到该目录：</p>
<pre><code>git clone https://github.com/clientlab/grunt-init-gruntfile.git ~/.grunt-init/gruntfile
</code></pre>
<p>在Windows平台上稍微有些不方便，但是可以在文件浏览器中输入%USERPROFILE%，定义到该目录下，然后执行如下命令：</p>
<pre><code>git clone https://github.com/clientlab/grunt-init-gruntfile.git ./.grunt-init/gruntfile
</code></pre>
<blockquote>
<p>要想使用上述命令，需要先安装一个msysgit(<a target="_blank" rel="noopener" href="http://msysgit.github.io/)%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%B8%AD%E5%A2%9E%E5%8A%A0git%E7%9A%84bin%E7%9B%AE%E5%BD%95%E3%80%82">http://msysgit.github.io/)，然后在环境变量中增加git的bin目录。</a></p>
</blockquote>
<p>最终的文件目录结构，如下：</p>
<pre><code>.grunt-init/
.grunt-init/gruntfile/
.grunt-init/gruntfile/README.md
.grunt-init/gruntfile/template.js
.grunt-init/gruntfile/root/
</code></pre>
<p>然后进入一个准备开发项目的空目录，按Shift+鼠标右键，打开右键菜单，选择“在此处打开命令窗口(W)”，打开命令行，执行如下程序：</p>
<pre><code>grunt-init gruntfile
</code></pre>
<blockquote>
<p>请注意，此模板将在当前目录中生成文件，如果你不想覆盖现有文件，一定要使用一个新的空目录。</p>
</blockquote>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://nodejs.org/">Node.js 官网(http://nodejs.org)</a></li>
<li><a target="_blank" rel="noopener" href="http://www.gruntjs.com/">Grunt 官网</a> - [<a target="_blank" rel="noopener" href="https://github.com/gruntjs/">GitHub</a>] [<a target="_blank" rel="noopener" href="http://www.gruntjs.org/">中文文档</a>]</li>
<li><a target="_blank" rel="noopener" href="http://windows.github.com/">git工具的安装</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/gruntjs/">其他常用 grunt-init 模板</a></li>
<li><a target="_blank" rel="noopener" href="http://www.gruntjs.org/article/project_scaffolding.html">grunt-init 自定义模板开发</a></li>
<li><a target="_blank" rel="noopener" href="http://www.baidufe.com/item/f6234bd5af7958b2ba03.html">几个常见的“npm ERR! Error”</a></li>
</ul>

      
    </div>
  </div>
  
</article>



  
    <article id="post-it-lessons-2013-10-15-project-use-grunt-run-grunt" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2013-10-15-project-use-grunt-run-grunt.html" class="article-date">
  <time class="dt-published" datetime="2013-10-14T16:00:00.000Z" itemprop="datePublished">2013-10-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/articles/it-lessons-2013-10-15-project-use-grunt-run-grunt.html">使用grunt-run-grunt插件组织团队的开发</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="项目构建的需求"><a href="#项目构建的需求" class="headerlink" title="项目构建的需求"></a>项目构建的需求</h2><p>在组织项目的开发工作时，如果构建工具选型是Grunt，那么常常有以下几个需求：</p>
<ol>
<li>Gruntfile文件随着项目复杂性的增加，会变的越来越庞大。为了便于开发团队的分工协作，需要在某种程度上分拆Gruntfile，让不同的团队、不同的开发者关注不同的部分。</li>
<li>把Gruntfile分拆成不同的文件后，既要有统一的入口执行整体的构建，又要能够使分拆后的Gruntfile不依赖于其他部分独立构建，以确保团队分工的互不干扰。</li>
<li>在整个项目中，package.json和node_modules要能够共用。确保每一部分的开发者，只关注Gruntfile的编写，不需要关注全局共性的package.json和node_modules。</li>
</ol>
<p>不同的团队、 不同的项目因为细化需求的不同，都会各自选择不同的解决方案。</p>
<h2 id="Gruntfile的分拆方案"><a href="#Gruntfile的分拆方案" class="headerlink" title="Gruntfile的分拆方案"></a>Gruntfile的分拆方案</h2><h3 id="Gruntfile文件内的逻辑分组"><a href="#Gruntfile文件内的逻辑分组" class="headerlink" title="Gruntfile文件内的逻辑分组"></a>Gruntfile文件内的逻辑分组</h3><p>使用任务的目标名称，在逻辑上分组构建任务。这是大多数项目最初会用到的方法，如<a target="_blank" rel="noopener" href="https://github.com/basestyle/grunt-cn">grunt中文文档项目(https://github.com/basestyle/grunt-cn)</a>。</p>
<p>在传递给grunt.initConfig方法的对象中，使用如下类似的不同任务目标名称区分webapp和pc两类任务：</p>
<pre><code>jshint:&#123;
    webapp: [&#39;app/www/js/main.js&#39;],
    pc: [&#39;js/chart.js&#39;,&#39;js/common.js&#39;,&#39;js/demand.js&#39;,&#39;js/dialog.js&#39;,&#39;js/formbeautify.js&#39;,&#39;js/jquery.autopagination.js&#39;,
        &#39;js/jquery.cascadeselect.js&#39;,&#39;js/jquery.datepicker.js&#39;,&#39;js/jquery.formvalid.js&#39;,&#39;js/jquery.memberinput.js&#39;,
        &#39;js/jquery.multiupload.js&#39;,&#39;js/jquery.tabs.js&#39;,&#39;js/pmstation.js&#39;,&#39;js/project.js&#39;,&#39;js/setting.js&#39;,&#39;js/tasktable.js&#39;,&#39;js/work.js&#39;]
&#125;,
</code></pre>
<p>在自定义的别名任务中，把两类任务分组成webapp和pc两个单任务：</p>
<pre><code>grunt.registerTask(&#39;webapp&#39;, [&#39;htmlhint:webapp&#39;,&#39;jshint:webapp&#39;,&#39;uglify:webapp&#39;,&#39;cssmin:webapp&#39;,&#39;copy:webapp&#39;,&#39;replace:webapp&#39;]);
grunt.registerTask(&#39;pc&#39;, [&#39;jshint:pc&#39;,&#39;uglify:pc&#39;,&#39;cssmin:pc&#39;,&#39;copy:pc&#39;,&#39;replace:pc&#39;]);
</code></pre>
<p>如果两类任务调用的任务都相同，也可以使用动态别名任务的方法来处理。</p>
<p>代码示例如下：</p>
<pre><code>grunt.registerTask(&#39;build&#39;, &#39;Run all my build tasks.&#39;, function(n) &#123;
  if (n == null) &#123;
    grunt.warn(&#39;Build num must be specified, like build:001.&#39;);
  &#125;
  grunt.task.run(&#39;foo:&#39; + n, &#39;bar:&#39; + n, &#39;baz:&#39; + n);
&#125;);
</code></pre>
<p>参见Grunt文档的《常见问题-“动态”别名任务》(<a target="_blank" rel="noopener" href="http://www.gruntjs.org/article/frequently_asked_questions.html">中文</a>&#x2F;<a target="_blank" rel="noopener" href="http://gruntjs.com/frequently-asked-questions">英文</a>)。</p>
<h3 id="Grunt配置编程处理在不同的文件中"><a href="#Grunt配置编程处理在不同的文件中" class="headerlink" title="Grunt配置编程处理在不同的文件中"></a>Grunt配置编程处理在不同的文件中</h3><p>将配置对象分拆出来，然后在Gruntfile.js中require进来，再将这些不同任务的对象组合成一个对象传递给grunt.initConfig。</p>
<p>上述方案是在我提出问题（<a target="_blank" rel="noopener" href="https://github.com/basestyle/grunt-cn/issues/34">有没有分拆Gruntfile.js的方案？(https://github.com/basestyle/grunt-cn/issues/34)</a>）后，<a target="_blank" rel="noopener" href="http://www.toobug.net/">TooBug</a>[<a target="_blank" rel="noopener" href="https://github.com/TooBug">GitHub</a>]和<a target="_blank" rel="noopener" href="https://github.com/qivhou">Vincent Hou</a>给出的解决方案。</p>
<p>因为没有进一步展开，所以没有示例代码。</p>
<h3 id="使用自定义任务把构建任务分解在不同的文件中"><a href="#使用自定义任务把构建任务分解在不同的文件中" class="headerlink" title="使用自定义任务把构建任务分解在不同的文件中"></a>使用自定义任务把构建任务分解在不同的文件中</h3><p>我在知乎上提出问题《<a target="_blank" rel="noopener" href="http://www.zhihu.com/question/21766711">有什么方案可以把较为庞大的gruntfile分拆？(http://www.zhihu.com/question/21766711)</a>》后,<a target="_blank" rel="noopener" href="http://morlay.tla42.org/">墨磊</a>[<a target="_blank" rel="noopener" href="https://github.com/morlay">GitHub</a>]给出的解决方案，基本上就是使用自定义任务把构建任务分解在不同的文件中的。</p>
<p>比如，在<a target="_blank" rel="noopener" href="https://github.com/gruntjs/gruntjs.com">gruntjs.com(https://github.com/gruntjs/gruntjs.com)</a>项目中，也是通过把blog、docs等任务从Gruntfile中分拆出来的。</p>
<p>代码示例如下：</p>
<pre><code>// Load local tasks
grunt.loadTasks(&#39;tasks&#39;); // getWiki, docs tasks

grunt.registerTask(&#39;build&#39;, [&#39;clean&#39;, &#39;copy&#39;, &#39;jade&#39;, &#39;docs&#39;, &#39;blog&#39;, &#39;plugins&#39;, &#39;concat&#39;]);
</code></pre>
<p>上例中的docs、blog任务就是放在tasks目录下，使用grunt.loadTasks方法统一加载的。</p>
<h2 id="选择grunt-run-grunt插件"><a href="#选择grunt-run-grunt插件" class="headerlink" title="选择grunt-run-grunt插件"></a>选择grunt-run-grunt插件</h2><p>前文的所述的几个方案，用于分拆Gruntfile虽然很不错，但是并不能解决最初提出的后两个需求：</p>
<ul>
<li>分拆后的Gruntfile，能够不依赖于其他部分的独立构建。</li>
<li>package.json和node_modules要能够共用。</li>
</ul>
<p>我发现<a target="_blank" rel="noopener" href="https://github.com/Bartvds/grunt-run-grunt">grunt-run-grunt(https://github.com/Bartvds/grunt-run-grunt)</a>插件可以同时满足这三个需求。</p>
<p>很遗憾的是，这个插件关注的人不多，Fork的人也不多。或许其他的开发团队有更高明的方案也说不一定，还需要继续跟进。</p>
<h2 id="项目的组织方案"><a href="#项目的组织方案" class="headerlink" title="项目的组织方案"></a>项目的组织方案</h2><p>在选型定案使用grunt-run-grunt插件以后，项目的组织就确定了。</p>
<p>入口Gruntfile的代码示例：</p>
<pre><code>run_grunt:&#123;
  options: &#123;
    &#39;base&#39;: require(&#39;path&#39;).resolve(&#39;.&#39;)
  &#125;,
  main:&#123;
    src: [&#39;src/pro/a.Gruntfile.js&#39;, &#39;src/frameworks/b.lib.Gruntfile.js&#39;, &#39;src/frameworks/c.lib.Gruntfile.js&#39;]        
  &#125;
&#125;
</code></pre>
<p>需要特别注意的是，options中的base配置是指整个项目所有的Gruntfile都是以这个入口Gruntfile所在的目录为base目录的。</p>
<p>这个扩展机制可以在options中配置最终传递给grunt的命令行参数，属性名是命令行参数名，属性值是命令行参数的值。</p>
<p>上例配置的意义是要求执行类似如下样式的Grunt命令：</p>
<pre><code>grunt --base e:/dev/
</code></pre>
<p>各部分的Gruntfile与正常的Gruntfile没有什么区别。唯一的区别就是，这个方案把所有的Gruntfile的base目录设定为入口Gruntfile所在的目录。</p>
<p>比如，src&#x2F;pro&#x2F;a.Gruntfile.js中的代码示例如下：</p>
<pre><code>concat: &#123;
  &quot;pro: &#123;
    src: [
      &quot;src/frameworks/b.lib.js&quot;,
      &quot;src/frameworks/c.lib.js&quot;,
      &quot;src/pro/a.js&quot;
    ],
    dest: &quot;dist/pro/a.js&quot;
  &#125;
&#125;
</code></pre>
<p>示例中，不管是src目录，还是dest目录，都是以入口Gruntfile目录为基准的。</p>
<p>当然，base目录不这样安排是最简单的，在入口Gruntfile的run_grunt任务中不配置base就可以了。如此以来，所有的Gruntfile中的目录都是以本Gruntfile所在目录为base目录的。</p>

      
    </div>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/16/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/18/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">
      <img src="/images/weixin.png" alt="weixin" width="100%" />
    </h3>
    <div class="widget">
      <ul class="self-media-list">
        
          <li>
            <a target="_blank" rel="noopener" href="https://weread.qq.com/">微信读书</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/cgi-bin/home">微信公众号</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://channels.weixin.qq.com/platform">视频号助手</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">札记随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/arts/">文艺随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/travel/">老周游记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/read/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/thinking/">思考札记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/">典籍学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/classic/hou-han-shu/">后汉书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/qing-shi/">清史稿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/sutra/">佛经</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/analects/">论语</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/su-wen/">黄帝内经素问</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/">培公诗抄</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2015/">2015 ~ 2024</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2010/">2010 ~ 2014</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2004/">2004 ~ 2009</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/b-2004/">~ 2004 年</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/buddha/">禅宗心得</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/characters/">人物</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/">藏书目录</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/bookcase/">在架图书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/table/">封存图书</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">IT</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/env/">开发环境</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/manual/">常用文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/studio/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/lessons/">培训教程</a></li></ul></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 VET. 周培公<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/proposals" class="mobile-nav-link">写作计划</a>
  
    <a href="/books" class="mobile-nav-link">藏书目录</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>