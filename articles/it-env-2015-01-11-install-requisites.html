<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>安装服务器的环境 | VET. 周培公</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Git下载可以到https:&#x2F;&#x2F;github.com&#x2F;git&#x2F;git&#x2F;releases，去查看最新的发布版本。 如果还没有安装过GIT，可以使用wget下载最新的版本： cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;git wget -c https:&#x2F;&#x2F;github.com&#x2F;git&#x2F;git&#x2F;archive&#x2F;v2.0.2.tar.gz tar xvf v2.0.2.tar.gz  如果安装过GIT，可以使用">
<meta property="og:type" content="article">
<meta property="og:title" content="安装服务器的环境">
<meta property="og:url" content="http://pg.js.cn/articles/it-env-2015-01-11-install-requisites.html">
<meta property="og:site_name" content="VET. 周培公">
<meta property="og:description" content="Git下载可以到https:&#x2F;&#x2F;github.com&#x2F;git&#x2F;git&#x2F;releases，去查看最新的发布版本。 如果还没有安装过GIT，可以使用wget下载最新的版本： cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;git wget -c https:&#x2F;&#x2F;github.com&#x2F;git&#x2F;git&#x2F;archive&#x2F;v2.0.2.tar.gz tar xvf v2.0.2.tar.gz  如果安装过GIT，可以使用">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2015-01-10T16:00:00.000Z">
<meta property="article:modified_time" content="2024-08-29T16:00:00.000Z">
<meta property="article:author" content="VET. 周培公">
<meta name="twitter:card" content="summary">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">VET. 周培公</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">写 JS 代码的周培公是一个兽医</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/proposals">写作计划</a>
        
          <a class="main-nav-link" href="/books">藏书目录</a>
        
      </nav>
      <nav id="sub-nav">
        
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://github.com/peigong"><span class="fa fa-github"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://gitee.com/pg0xff"><span class="fa fa-git"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://user.qzone.qq.com/377650913"><span class="fa fa-qq"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://weibo.com/u/1766654653"><span class="fa fa-weibo"></span></a>
          
            <a class="nav-icon" href="https://pg.js.cn"><span class="fa fa-home"></span></a>
          
        
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-it-env-2015-01-11-install-requisites" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-env-2015-01-11-install-requisites.html" class="article-date">
  <time class="dt-published" datetime="2015-01-10T16:00:00.000Z" itemprop="datePublished">2015-01-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/env/">开发环境</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      安装服务器的环境
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>可以到<a target="_blank" rel="noopener" href="https://github.com/git/git/releases">https://github.com/git/git/releases</a>，去查看最新的发布版本。</p>
<p>如果还没有安装过GIT，可以使用wget下载最新的版本：</p>
<pre><code>cd /usr/local/src/git
wget -c https://github.com/git/git/archive/v2.0.2.tar.gz
tar xvf v2.0.2.tar.gz
</code></pre>
<p>如果安装过GIT，可以使用<code>git clone</code>最新的版本分支：</p>
<pre><code>git clone https://github.com/git/git.git git-2.0.2 -b v2.0.2
</code></pre>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>编译安装：</p>
<pre><code>cd git-2.0.2
make configure
./configure --prefix=/usr/local/git
make &amp;&amp; make install
</code></pre>
<p>修改<code>/etc/profile</code>，在PATH中加入git路径，并执行<code>source /etc/profile</code>：</p>
<pre><code>GIT_HOME=/usr/local/git
PATH=$PATH:$GIT_HOME/bin:$GIT_HOME/libexec/git-core
export PATH GIT_HOME
</code></pre>
<p>确认是否安装成功：</p>
<pre><code>git --version
</code></pre>
<h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>如果执行<code>git clone</code>命令时报错：</p>
<pre><code>error: SSL certificate problem, verify that the CA cert is OK.
</code></pre>
<p>可以设置<code>git config</code>，如下：</p>
<pre><code>git config --global http.sslVerify false
</code></pre>
<h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><h3 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h3><ul>
<li>GCC 4.2 或更新版本</li>
<li>G++ 4.2 或更新版本</li>
<li>Python 2.6 或 2.7</li>
<li>GNU Make 3.81 或更新版本</li>
</ul>
<p>一般服务器都会具备上述条件，如果不具备，参见后文的《安装Node的依赖》。</p>
<h3 id="下载-1"><a href="#下载-1" class="headerlink" title="下载"></a>下载</h3><p>可以到<a target="_blank" rel="noopener" href="https://github.com/joyent/node/releases">https://github.com/joyent/node/releases</a>，去查看最新的发布版本。</p>
<p>可以使用wget下载最新的版本：</p>
<pre><code>cd /usr/local/src/node
wget -c https://github.com/joyent/node/archive/v0.10.30.tar.gz
tar xvf v0.10.30
</code></pre>
<p>可以使用<code>git clone</code>最新的版本分支：</p>
<pre><code>git clone https://github.com/joyent/node.git node-0.10.30 -b v0.10.30
</code></pre>
<h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p>编译安装：</p>
<pre><code>cd node-0.10.30
./configure --prefix=/usr/local/node
make &amp;&amp; make install
</code></pre>
<p>修改<code>/etc/profile</code>，在PATH中加入Node路径，并执行<code>source /etc/profile</code>：</p>
<pre><code>NODE_HOME=/usr/local/node
PATH=$PATH:$NODE_HOME/bin
export PATH NODE_HOME
</code></pre>
<p>确认是否安装成功：</p>
<pre><code>node -v
</code></pre>
<h3 id="本地化NPM配置"><a href="#本地化NPM配置" class="headerlink" title="本地化NPM配置"></a>本地化NPM配置</h3><blockquote>
<p>国内服务器建议使用</p>
</blockquote>
<p>用户根目录下如果有NPM本地配置文件<code>.npmrc</code>，写入如下内容：</p>
<pre><code>cd ~
registry=http://r.cnpmjs.org
</code></pre>
<p>如果用户根目录没有<code>.npmrc</code>文件，使用以下命令生成：</p>
<pre><code>cd ~
echo registry=http://r.cnpmjs.org &gt; .npmrc
</code></pre>
<p><strong>备注：</strong>此配置用于从国内的NPM镜像库更新数据。</p>
<h3 id="检查更新到Node的最新版本"><a href="#检查更新到Node的最新版本" class="headerlink" title="检查更新到Node的最新版本"></a>检查更新到Node的最新版本</h3><blockquote>
<p>建议操作</p>
</blockquote>
<pre><code>npm install -g n
n stable
</code></pre>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p>在<a target="_blank" rel="noopener" href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a>下载MongoDB到<code>/usr/local/src/mongodb</code>。</p>
<pre><code>cd /usr/local/src/mongodb
wget -c http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-2.6.3.tgz
tar xvf mongodb-linux-x86_64-2.6.3.tgz
mv ./mongodb-linux-x86_64-2.6.3 /usr/local/mongodb
</code></pre>
<p>修改<code>/etc/rc.local</code>，将mongoDB服务加入随机启动</p>
<pre><code>numactl --interleave=all /usr/local/mongodb/bin/mongod --port 27017 --directoryperdb --fork --dbpath=/home/&#123;服务名称&#125;/data/mongodb/data  --logpath=/home/&#123;服务名称&#125;/data/mongodb/log/mongodb.log &gt; /dev/null &amp;
</code></pre>
<p><strong>注意：</strong>如果提示<code>WARNING: You are running on a NUMA machine.</code>警告信息，则在原启动命令前面加<code>numactl –interleave=all</code>。</p>
<p>修改<code>/etc/profile</code>，在PATH中加入MongoDB路径，并执行<code>source /etc/profile</code>：</p>
<pre><code>MONGODB_HOME=/usr/local/mongodb
PATH=$PATH:$MONGODB_HOME/bin
export PATH MONGODB_HOME
</code></pre>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>在<a target="_blank" rel="noopener" href="http://www.redis.io/download">http://www.redis.io/download</a>下载Redis到<code>/usr/local/src/redis</code>。</p>
<pre><code>cd /usr/local/src/redis
wget -c http://download.redis.io/releases/redis-2.8.13.tar.gz
tar xvf redis-2.8.13.tar.gz
cd redis-2.8.13

make

cp /usr/local/src/redis/redis-2.8.13/redis.conf /usr/local/redis/redis.conf
cp /usr/local/src/redis/redis-2.8.13/src/redis-server /usr/local/redis/redis-server
cp /usr/local/src/redis/redis-2.8.13/src/redis-cli /usr/local/redis/redis-cli
cp /usr/local/src/redis/redis-2.8.13/src/redis-benchmark /usr/local/redis/redis-benchmark
</code></pre>
<p>修改<code>/etc/rc.local</code>，将Redis服务加入随机启动</p>
<pre><code>/usr/local/redis/redis-server /usr/local/redis/redis.conf &gt; /dev/null &amp;
</code></pre>
<p>可以修改<code>/usr/local/redis/redis.conf</code>配置Redis服务。</p>
<p>修改<code>/etc/profile</code>，在PATH中加入Redis路径，并执行<code>source /etc/profile</code>：</p>
<pre><code>PATH=$PATH:/usr/local/redis
export PATH
</code></pre>
<p>主要配置参数的意义：</p>
<ul>
<li>daemonize：是否以后台daemon方式运行</li>
<li>pidfile：pid文件位置</li>
<li>port：监听的端口号</li>
<li>timeout：请求超时时间</li>
<li>loglevel：log信息级别</li>
<li>logfile：log文件位置</li>
<li>databases：开启数据库的数量</li>
<li>save * (<em>：保存快照的频率，第一个</em>表示多长时间，第三个*表示执行多少次写操作。在一定时间内执行一定数量的写操作时，自动保存快照。可设置多个条件)</li>
<li>rdbcompression：是否使用压缩</li>
<li>dbfilename：数据快照文件名（只是文件名，不包括目录）</li>
<li>dir：数据快照的保存目录（这个是目录）</li>
<li>appendonly：是否开启appendonlylog，开启的话每次写操作会记一条log，这会提高数据抗风险能力，但影响效率。</li>
<li>appendfsync：appendonlylog如何同步到磁盘（三个选项，分别是每次写都强制调用fsync、每秒启用一次fsync、不调用fsync等待系统自己同步）</li>
</ul>
<h2 id="安装Node的依赖"><a href="#安装Node的依赖" class="headerlink" title="安装Node的依赖"></a>安装Node的依赖</h2><h3 id="GCC"><a href="#GCC" class="headerlink" title="GCC"></a>GCC</h3><p>下载文件：</p>
<pre><code>#cd /usr/local/src
#wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-0.8.1.tar.gz
#wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-2.4.2.tar.bz2
#wget ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-4.3.2.tar.bz2
#wget http://ftp.gnu.org/gnu/gcc/gcc-4.6.1/gcc-4.6.1.tar.bz2
 
#tar jxvf gmp-4.3.2.tar.bz2 
#cd gmp-4.3.2
#./configure --prefix=/usr/local/gmp-4.3.2
#make 
#make check
#make  install
 
#tar jxvf mpfr-2.4.2.tar.bz2
#cd mpfr-2.4.2
#./configure --prefix=/usr/local/mpfr-2.4.2 --with-gmp=/usr/local/gmp-4.3.2
#make &amp;&amp; make install

#tar zxvf mpc-0.8.1.tar.gz
#cd mpc-0.8.1
#./configure --prefix=/usr/local/mpc-0.8.1 --with-gmp=/usr/local/gmp-4.3.2 --with-mpfr=/usr/local/mpfr-2.4.2
#make &amp;&amp; make install
 
#tar jxvf gcc-4.6.1.tar.bz2
#cd gcc-4.6.1
</code></pre>
<p>编译前需要执行上述命令，否则报错找不到依赖库。</p>
<p>修改<code>/etc/profile</code>，加入：</p>
<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/mpc-0.8.1/lib:/usr/local/gmp-4.3.2/lib:/usr/local/mpfr-2.4.2/lib

LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/gcc-4.6.1/lib:/usr/local/mpc-0.8.1/lib:/usr/local/gmp-4.3.2/lib:/usr/local/mpf
r-2.4.2/lib
export LD_LIBRARY_PATH
</code></pre>
<p>执行：</p>
<pre><code>#source /etc/profile
#./configure --prefix=/usr/local/gcc-4.6.1 --enable-threads=posix --disable-checking --disable-multilib --enable-languages=c,c++,java --with-gmp=/usr/local/gmp-4.3.2 --with-mpfr=/usr/local/mpfr-2.4.2 --with-mpc=/usr/local/mpc-0.8.1
#make &amp;&amp; make install
</code></pre>
<p>让两个版本gcc并存：</p>
<pre><code>#cd  /usr/bin
#mv gcc gcc4.1
#ln -s /usr/local/gcc-4.6.1/bin/gcc /usr/bin/gcc
#mv g++ g++4.1
#ln -s /usr/local/gcc-4.6.1/bin/g++ /usr/bin/g++
#cp  /usr/local/gcc-4.6.1/bin/gcj /usr/bin/
</code></pre>
<p>至此可以直接使用gcc，g++和gcj命令</p>
<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>在<a target="_blank" rel="noopener" href="https://www.python.org/download/">https://www.python.org/download/</a>查看最新版本。</p>
<pre><code>cd /usr/local/src/python
wget -c --no-check-certificate https://www.python.org/ftp/python/2.7.8/Python-2.7.8.tar.xz
xz -d Python-2.7.8.tar.xz
tar xvf Python-2.7.8.tar
cd Python-2.7.8
./configure --prefix=/usr/local/python
make &amp;&amp; make install
</code></pre>
<p>修改<code>/etc/profile</code>，在PATH中加入git路径，并执行<code>source /etc/profile</code>：</p>
<pre><code>PYTHON_HOME=/usr/local/python
PATH=$PATH:$PYTHON_HOME/bin
export PATH PYTHON_HOME
</code></pre>
<p>清理原有安装：</p>
<pre><code>cd /usr/bin
ll |grep python  
rm -rf python
ln -s /usr/local/python/bin/python ./python
</code></pre>
<h2 id="Linux服务器"><a href="#Linux服务器" class="headerlink" title="Linux服务器"></a>Linux服务器</h2><ul>
<li><a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-20761674-id-74963.html">如何实现安全的免密码ssh登录</a><ul>
<li>在跳板机宿主目录下的<code>.bashrc</code>文件底部加入 eval `&#x2F;usr&#x2F;local&#x2F;bin&#x2F;ssh-attach`</li>
<li>尝试<code>SSH</code>登陆任意一台机器，输入正确的口令</li>
<li>退出后，重新登陆跳板机，再次输入口令，即可ssh 任意机器（或者<code>source .bashrc</code>）</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/wanqieddy/archive/2011/07/15/2107071.html">Linux下的五个查找命令：grep、find、locate、whereis、which</a></li>
</ul>

      
    </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/articles/it-lessons-2015-01-12-vi-commands.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          VI的常用操作
        
      </div>
    </a>
  
  
    <a href="/articles/poem-a-2015-2015-01-06-ming-jing.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">明镜</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">
      <img src="/images/weixin.png" alt="weixin" width="100%" />
    </h3>
    <div class="widget">
      <ul class="self-media-list">
        
          <li>
            <a target="_blank" rel="noopener" href="https://weread.qq.com/">微信读书</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/cgi-bin/home">微信公众号</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://channels.weixin.qq.com/platform">视频号助手</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://qqzz.qq.com/index">QQ 短视频</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://creator.douyin.com/creator-micro/home">抖音创作者</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://cp.kuaishou.com/profile">快手创作者</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://member.bilibili.com/platform/home">bilibli 创作中心</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://studio.ximalaya.com/">喜玛拉雅</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://creator.xiaohongshu.com/creator/home">小红书创作</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://www.jianshu.com/u/a1722005e938">简书</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">札记随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/arts/">文艺随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/travel/">老周游记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/thinking/">思考札记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/">培公诗抄</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2015/">2015 ~ 2024</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2010/">2010 ~ 2014</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2004/">2004 ~ 2009</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/b-2004/">~ 2004 年</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/buddha/">禅宗心得</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/characters/">人物</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/">典籍学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/classic/sutra/">佛经</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/analects/">论语</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/su-wen/">黄帝内经素问</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/">藏书目录</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/bookcase/">在架图书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/table/">封存图书</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">IT</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/env/">开发环境</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/manual/">常用文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/studio/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/lessons/">培训教程</a></li></ul></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 VET. 周培公<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/proposals" class="mobile-nav-link">写作计划</a>
  
    <a href="/books" class="mobile-nav-link">藏书目录</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>