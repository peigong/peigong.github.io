<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>在javascript项目中使用QUint进行单元测试 | VET. 周培公</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="QUnit的简介 本文只介绍Qunit的使用，不再介绍单元测试框架的选型过程。  QUnit的官网介绍： QUnit is a powerful, easy-to-use JavaScript unit testing framework.  QUnit是一个强大的、简单易用的javascript单元测试框架。 下载QUnit可以到QUnit官网(http:&#x2F;&#x2F;qunitjs.com)上下载qun">
<meta property="og:type" content="article">
<meta property="og:title" content="在javascript项目中使用QUint进行单元测试">
<meta property="og:url" content="http://pg.js.cn/articles/it-lessons-2013-10-12-unit-test-by-qunit.html">
<meta property="og:site_name" content="VET. 周培公">
<meta property="og:description" content="QUnit的简介 本文只介绍Qunit的使用，不再介绍单元测试框架的选型过程。  QUnit的官网介绍： QUnit is a powerful, easy-to-use JavaScript unit testing framework.  QUnit是一个强大的、简单易用的javascript单元测试框架。 下载QUnit可以到QUnit官网(http:&#x2F;&#x2F;qunitjs.com)上下载qun">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2013-10-11T16:00:00.000Z">
<meta property="article:modified_time" content="2024-08-29T16:00:00.000Z">
<meta property="article:author" content="VET. 周培公">
<meta name="twitter:card" content="summary">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">VET. 周培公</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">写 JS 代码的周培公是一个兽医</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/proposals">写作计划</a>
        
          <a class="main-nav-link" href="/books">藏书目录</a>
        
      </nav>
      <nav id="sub-nav">
        
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://github.com/peigong"><span class="fa fa-github"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://gitee.com/pg0xff"><span class="fa fa-git"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://user.qzone.qq.com/377650913"><span class="fa fa-qq"></span></a>
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://weibo.com/u/1766654653"><span class="fa fa-weibo"></span></a>
          
            <a class="nav-icon" href="https://pg.js.cn"><span class="fa fa-home"></span></a>
          
        
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-it-lessons-2013-10-12-unit-test-by-qunit" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/articles/it-lessons-2013-10-12-unit-test-by-qunit.html" class="article-date">
  <time class="dt-published" datetime="2013-10-11T16:00:00.000Z" itemprop="datePublished">2013-10-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">IT</a>►<a class="article-category-link" href="/categories/it/lessons/">培训教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      在javascript项目中使用QUint进行单元测试
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="QUnit的简介"><a href="#QUnit的简介" class="headerlink" title="QUnit的简介"></a>QUnit的简介</h2><blockquote>
<p>本文只介绍<a target="_blank" rel="noopener" href="http://qunitjs.com/">Qunit</a>的使用，不再介绍单元测试框架的选型过程。</p>
</blockquote>
<p>QUnit的官网介绍：</p>
<p>QUnit is a powerful, easy-to-use JavaScript unit testing framework. </p>
<p>QUnit是一个强大的、简单易用的javascript单元测试框架。</p>
<h3 id="下载QUnit"><a href="#下载QUnit" class="headerlink" title="下载QUnit"></a>下载QUnit</h3><p>可以到<a target="_blank" rel="noopener" href="http://qunitjs.com/">QUnit官网(http://qunitjs.com)</a>上下载qunit.js和qunit.css两个文件。</p>
<p>虽然有<a target="_blank" rel="noopener" href="http://code.jquery.com/">jQuery CDN(http://code.jquery.com/)</a>和<a target="_blank" rel="noopener" href="https://github.com/jquery/qunit">GitHub托管(https://github.com/jquery/qunit)</a>的代码可用，但是为了稳定，还是下载了使用吧。</p>
<h3 id="QUnit上手应用"><a href="#QUnit上手应用" class="headerlink" title="QUnit上手应用"></a>QUnit上手应用</h3><blockquote>
<p>以下的代码示例直接使用QUnit官网首页的示例。</p>
</blockquote>
<p>QUnit单元测试的HTML页面代码示例：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;QUnit Example&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;/resources/qunit.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;qunit&quot;&gt;&lt;/div&gt;
  &lt;div id=&quot;qunit-fixture&quot;&gt;&lt;/div&gt;
  &lt;script src=&quot;/resources/qunit.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;/resources/tests.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>tests.js中的示例代码：</p>
<pre><code>test( &quot;hello test&quot;, function() &#123;
  ok( 1 == &quot;1&quot;, &quot;Passed!&quot; );
&#125;);
</code></pre>
<h2 id="QUnit的常用API"><a href="#QUnit的常用API" class="headerlink" title="QUnit的常用API"></a>QUnit的常用API</h2><blockquote>
<p>断言是单元测试中最常用、最核心的概念，就是在测试的时候，对代码的运行结果作出的一些假设。如果断言成立，就说单元测试通过，反之则视为测试失败。</p>
</blockquote>
<h3 id="测试方法和模块"><a href="#测试方法和模块" class="headerlink" title="测试方法和模块"></a>测试方法和模块</h3><p>最常用的测试代码，示例如下：</p>
<pre><code>test(&quot;该测试用例的主题&quot;, function()&#123;/*- 具体的测试断言 -*/&#125;);
</code></pre>
<p>当测试用例较多时，可以用module()方法进行分组。示例如下：</p>
<pre><code>module( &quot;测试分组一&quot; );
test( &quot;测试方法1&quot;, function() &#123;&#125;);
test( &quot;测试方法2&quot;, function() &#123;&#125;);
 
module( &quot;测试分组二&quot; );
test( &quot;测试方法3&quot;, function() &#123;&#125;);
test( &quot;测试方法4&quot;, function() &#123;&#125;);
</code></pre>
<p>在测试结果HTML页面上，会以 <code>测试分组一：测试方法1</code> 的形式呈现。</p>
<h3 id="异步测试"><a href="#异步测试" class="headerlink" title="异步测试"></a>异步测试</h3><p>javascript编程中，经常用到回调函数，所以异步测试也是经常用到的。</p>
<p>如下示例：</p>
<pre><code>asyncTest( &quot;asynchronous test: one second later!&quot;, function() &#123;
  expect( 1 );
 
  setTimeout(function() &#123;
    ok( true, &quot;Passed and ready to resume!&quot; );
    start();
  &#125;, 1000);
&#125;);
</code></pre>
<p><strong>注意</strong><code>start()</code>函数的用法。</p>
<p>由于是异步调用，所以使用<code>expect()</code>告诉QUnit期待几个断言是个好习惯。</p>
<h3 id="QUnit支持的断言"><a href="#QUnit支持的断言" class="headerlink" title="QUnit支持的断言"></a>QUnit支持的断言</h3><blockquote>
<p>一个测试方法只有一个断言是个好习惯。只是好习惯哦！</p>
</blockquote>
<p>一目了然，<strong>ok和equal是最常用的</strong>。</p>
<ul>
<li>ok( state, message ) ： 真假断言，state为true则通过。</li>
<li>equal( actual, expected, message ) ： 相等断言，actual和expected相等（&#x3D;&#x3D;）则通过。</li>
<li>notEqual( actual, expected, message ) ： 不等断言，actual和expected不相等（!&#x3D;）则通过。</li>
<li>deepEqual( actual, expected, message ) ： 递归相等断言，actual和expected全相等（包括其子元素都相等，适用于基本类型，数组和对象）则通过。</li>
<li>notDeepEqual( actual, expected, message ) ： 递归不相等断言，actual和expected不全相等（包括其子元素都相等，适用于基本类型，数组和对象）则通过。</li>
<li>strictEqual( actual, expected, message ) ： 全相等断言，actual和expected全相等（&#x3D;&#x3D;&#x3D;）则通过。</li>
<li>notStrictEqual( actual, expected, message ) ： 不全相等断言，actual和expected不全相等（&#x3D;&#x3D;&#x3D;）则通过。</li>
<li>raises( block, expected, message ) ： 异常断言，block中抛出异常则通过，expected为可选参数，是所期待抛出异常名的正则表达式。</li>
</ul>
<h2 id="与Grunt构建工具的集成"><a href="#与Grunt构建工具的集成" class="headerlink" title="与Grunt构建工具的集成"></a>与Grunt构建工具的集成</h2><p>Grunt构建工具的安装和使用，可以参考教程<a href="/lessons/2013/10/15/installation-and-use-of-grunt/">《Grunt的安装和使用》</a></p>
<h3 id="QUnit的Grunt任务"><a href="#QUnit的Grunt任务" class="headerlink" title="QUnit的Grunt任务"></a>QUnit的Grunt任务</h3><p>QUnit Grunt任务(grunt-contrib-qunit)的使用，请参见GitHub上的说明<a target="_blank" rel="noopener" href="https://github.com/gruntjs/grunt-contrib-qunit">https://github.com/gruntjs/grunt-contrib-qunit</a>。</p>
<p>使用QUint作单元测试，PhantomJS是必须要安装的。<a target="_blank" rel="noopener" href="http://phantomjs.org/">PhantomJS(http://phantomjs.org/)</a> 是一个无界面的WebKit浏览器引擎，还有配套的JavaScript API。它原生支持各种web标准技术：DOM处理，CSS选择器，JSON，Canvas，以及SVG。</p>
<p>安装grunt-contrib-qunit任务时，作为npm依赖项，PhantomJS会自己被安装。</p>
<p>也可以在命令行中使用以下的命令进行安装：</p>
<pre><code>npm install phantomjs -g
</code></pre>
<p><strong>友情提示：</strong></p>
<p>本来这一切都是顺理成章，非常流畅的。可惜，一道国墙给这个世界的互联互通制造了些许障碍。</p>
<p>如果电脑上从来没有安装过PhantomJS，或者当前的版本不够高，安装程序会自动从bitbucket网站上下载，例如：<a target="_blank" rel="noopener" href="http://cdn.bitbucket.org/ariya/phantomjs/downloads/phantomjs-1.9.7-windows.zip%E3%80%82%E4%BD%86%E6%98%AF%EF%BC%8C%E9%9D%9E%E5%B8%B8%E4%B8%8D%E5%B9%B8%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%9C%B0%E5%9D%80%E6%98%AF%E8%A2%AB%E5%A2%99%E4%BA%86%E7%9A%84%E3%80%82">http://cdn.bitbucket.org/ariya/phantomjs/downloads/phantomjs-1.9.7-windows.zip。但是，非常不幸，这个地址是被墙了的。</a></p>
<p>你可以从各种不同的途径，获取这个压缩包，然后拷贝到C:\Users\Administrator\AppData\Local\Temp\phantomjs（具体地址根据自己的电脑作调整，或者查看安装报错的信息）。接着，重新启动安装，一切都OK了！</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/nuaalfm/archive/2010/02/26/1674235.html">JQuery团队打造的javascript单元测试工具QUnit介绍</a></li>
<li><a target="_blank" rel="noopener" href="http://www.tuicool.com/articles/JVRRbq">DalekJS – 基于 JavaScript 实现跨浏览器的自动化测试</a></li>
<li><a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/opensource/os-jstesting/">高效 JavaScript 单元测试</a></li>
<li><a target="_blank" rel="noopener" href="http://select.yeeyan.org/view/213582/265887">JavaScript的单元测试工具</a></li>
<li><a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/javascript-unit-testing">虚拟座谈：JavaScript单元测试现状</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/frostbelt/archive/2012/08/03/2622302.html">javascript单元测试</a></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.org/">Node.js 官网(http://nodejs.org)</a></li>
<li><a target="_blank" rel="noopener" href="http://qunitjs.com/">QUnit 官网</a> - <a target="_blank" rel="noopener" href="https://github.com/jquery/qunit">GitHub</a></li>
<li><a target="_blank" rel="noopener" href="http://www.gruntjs.com/">Grunt 官网</a> - [<a target="_blank" rel="noopener" href="https://github.com/gruntjs/">GitHub</a>] [<a target="_blank" rel="noopener" href="http://www.gruntjs.org/">中文文档</a>]</li>
<li><a target="_blank" rel="noopener" href="http://phantomjs.org/">PhantomJS官网(http://phantomjs.org)</a></li>
<li><a target="_blank" rel="noopener" href="https://npmjs.org/package/phantomjs">https://npmjs.org/package/phantomjs</a></li>
</ul>

      
    </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/articles/it-lessons-2013-10-15-project-use-grunt-run-grunt.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          使用grunt-run-grunt插件组织团队的开发
        
      </div>
    </a>
  
  
    <a href="/articles/poem-a-2010-2013-09-27-liang-zhou-xin-ci.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">凉州新词</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">
      <img src="/images/weixin.png" alt="weixin" width="100%" />
    </h3>
    <div class="widget">
      <ul class="self-media-list">
        
          <li>
            <a target="_blank" rel="noopener" href="https://weread.qq.com/">微信读书</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/cgi-bin/home">微信公众号</a>
          </li>
        
          <li>
            <a target="_blank" rel="noopener" href="https://channels.weixin.qq.com/platform">视频号助手</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">札记随笔</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/essay/arts/">文艺随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/travel/">老周游记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/read/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/thinking/">思考札记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/">典籍学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/classic/qing-shi/">清史稿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/sutra/">佛经</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/analects/">论语</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/classic/su-wen/">黄帝内经素问</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/">培公诗抄</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2015/">2015 ~ 2024</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2010/">2010 ~ 2014</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/a-2004/">2004 ~ 2009</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/b-2004/">~ 2004 年</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/buddha/">禅宗心得</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poem/characters/">人物</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/">藏书目录</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/bookcase/">在架图书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/catalog/table/">封存图书</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">IT</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/env/">开发环境</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/manual/">常用文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/studio/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/lessons/">培训教程</a></li></ul></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 VET. 周培公<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/proposals" class="mobile-nav-link">写作计划</a>
  
    <a href="/books" class="mobile-nav-link">藏书目录</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>